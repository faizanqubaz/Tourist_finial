{"/Volumes/projectes/node-pushnotifications/src/index.js":{"path":"/Volumes/projectes/node-pushnotifications/src/index.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":3,"column":49}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["index.js"],"names":["module","exports","require"],"mappings":";;AAAAA,MAAM,CAACC,OAAP,GAAiBC,OAAO,CAAC,sBAAD,CAAxB","sourceRoot":"/Volumes/projectes/node-pushnotifications/src/","sourcesContent":["module.exports = require('./push-notifications');\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"38f9b1e312d22cf8a94c902a50c6dfc35fcb3a14","contentHash":"5ff736c3fbf03106314b424446029a21e91692e3628963673ad2c9e42de04fa3"},"/Volumes/projectes/node-pushnotifications/src/push-notifications.js":{"path":"/Volumes/projectes/node-pushnotifications/src/push-notifications.js","statementMap":{"0":{"start":{"line":3,"column":15},"end":{"line":3,"column":59}},"1":{"start":{"line":5,"column":15},"end":{"line":5,"column":59}},"2":{"start":{"line":7,"column":15},"end":{"line":7,"column":59}},"3":{"start":{"line":9,"column":15},"end":{"line":9,"column":59}},"4":{"start":{"line":11,"column":15},"end":{"line":11,"column":59}},"5":{"start":{"line":13,"column":17},"end":{"line":13,"column":39}},"6":{"start":{"line":15,"column":39},"end":{"line":15,"column":93}},"7":{"start":{"line":17,"column":54},"end":{"line":17,"column":73}},"8":{"start":{"line":17,"column":75},"end":{"line":17,"column":326}},"9":{"start":{"line":17,"column":125},"end":{"line":17,"column":161}},"10":{"start":{"line":17,"column":163},"end":{"line":17,"column":324}},"11":{"start":{"line":17,"column":224},"end":{"line":17,"column":287}},"12":{"start":{"line":17,"column":327},"end":{"line":17,"column":339}},"13":{"start":{"line":19,"column":33},"end":{"line":19,"column":489}},"14":{"start":{"line":19,"column":46},"end":{"line":19,"column":47}},"15":{"start":{"line":19,"column":91},"end":{"line":19,"column":131}},"16":{"start":{"line":19,"column":133},"end":{"line":19,"column":487}},"17":{"start":{"line":19,"column":194},"end":{"line":19,"column":236}},"18":{"start":{"line":19,"column":402},"end":{"line":19,"column":483}},"19":{"start":{"line":19,"column":490},"end":{"line":19,"column":504}},"20":{"start":{"line":21,"column":44},"end":{"line":21,"column":195}},"21":{"start":{"line":21,"column":62},"end":{"line":21,"column":166}},"22":{"start":{"line":21,"column":176},"end":{"line":21,"column":193}},"23":{"start":{"line":21,"column":196},"end":{"line":21,"column":207}},"24":{"start":{"line":25,"column":4},"end":{"line":25,"column":29}},"25":{"start":{"line":29,"column":4},"end":{"line":29,"column":88}},"26":{"start":{"line":31,"column":4},"end":{"line":33,"column":5}},"27":{"start":{"line":32,"column":6},"end":{"line":32,"column":26}},"28":{"start":{"line":35,"column":4},"end":{"line":35,"column":55}},"29":{"start":{"line":39,"column":4},"end":{"line":45,"column":7}},"30":{"start":{"line":40,"column":6},"end":{"line":40,"column":44}},"31":{"start":{"line":40,"column":22},"end":{"line":40,"column":26}},"32":{"start":{"line":41,"column":6},"end":{"line":41,"column":21}},"33":{"start":{"line":43,"column":6},"end":{"line":43,"column":36}},"34":{"start":{"line":43,"column":22},"end":{"line":43,"column":26}},"35":{"start":{"line":44,"column":6},"end":{"line":44,"column":35}},"36":{"start":{"line":49,"column":4},"end":{"line":54,"column":5}},"37":{"start":{"line":50,"column":6},"end":{"line":53,"column":8}},"38":{"start":{"line":56,"column":4},"end":{"line":61,"column":5}},"39":{"start":{"line":57,"column":6},"end":{"line":60,"column":8}},"40":{"start":{"line":63,"column":4},"end":{"line":68,"column":5}},"41":{"start":{"line":64,"column":6},"end":{"line":67,"column":8}},"42":{"start":{"line":70,"column":4},"end":{"line":75,"column":5}},"43":{"start":{"line":71,"column":6},"end":{"line":74,"column":8}},"44":{"start":{"line":77,"column":4},"end":{"line":82,"column":5}},"45":{"start":{"line":78,"column":6},"end":{"line":81,"column":8}},"46":{"start":{"line":85,"column":4},"end":{"line":90,"column":5}},"47":{"start":{"line":86,"column":6},"end":{"line":89,"column":8}},"48":{"start":{"line":92,"column":4},"end":{"line":97,"column":5}},"49":{"start":{"line":93,"column":6},"end":{"line":96,"column":8}},"50":{"start":{"line":99,"column":4},"end":{"line":102,"column":6}},"51":{"start":{"line":106,"column":21},"end":{"line":106,"column":23}},"52":{"start":{"line":107,"column":22},"end":{"line":107,"column":24}},"53":{"start":{"line":108,"column":22},"end":{"line":108,"column":24}},"54":{"start":{"line":109,"column":22},"end":{"line":109,"column":24}},"55":{"start":{"line":110,"column":22},"end":{"line":110,"column":24}},"56":{"start":{"line":111,"column":26},"end":{"line":111,"column":28}},"57":{"start":{"line":112,"column":22},"end":{"line":112,"column":24}},"58":{"start":{"line":113,"column":19},"end":{"line":113,"column":75}},"59":{"start":{"line":115,"column":4},"end":{"line":133,"column":7}},"60":{"start":{"line":116,"column":36},"end":{"line":116,"column":76}},"61":{"start":{"line":117,"column":20},"end":{"line":117,"column":47}},"62":{"start":{"line":118,"column":25},"end":{"line":118,"column":57}},"63":{"start":{"line":120,"column":6},"end":{"line":132,"column":7}},"64":{"start":{"line":121,"column":8},"end":{"line":121,"column":34}},"65":{"start":{"line":122,"column":13},"end":{"line":132,"column":7}},"66":{"start":{"line":123,"column":8},"end":{"line":123,"column":30}},"67":{"start":{"line":124,"column":13},"end":{"line":132,"column":7}},"68":{"start":{"line":125,"column":8},"end":{"line":125,"column":30}},"69":{"start":{"line":126,"column":13},"end":{"line":132,"column":7}},"70":{"start":{"line":127,"column":8},"end":{"line":127,"column":30}},"71":{"start":{"line":128,"column":13},"end":{"line":132,"column":7}},"72":{"start":{"line":129,"column":8},"end":{"line":129,"column":30}},"73":{"start":{"line":131,"column":8},"end":{"line":131,"column":30}},"74":{"start":{"line":135,"column":4},"end":{"line":162,"column":5}},"75":{"start":{"line":137,"column":6},"end":{"line":139,"column":7}},"76":{"start":{"line":138,"column":8},"end":{"line":138,"column":72}},"77":{"start":{"line":142,"column":6},"end":{"line":144,"column":7}},"78":{"start":{"line":143,"column":8},"end":{"line":143,"column":87}},"79":{"start":{"line":147,"column":6},"end":{"line":149,"column":7}},"80":{"start":{"line":148,"column":8},"end":{"line":148,"column":72}},"81":{"start":{"line":152,"column":6},"end":{"line":154,"column":7}},"82":{"start":{"line":153,"column":8},"end":{"line":153,"column":72}},"83":{"start":{"line":157,"column":6},"end":{"line":159,"column":7}},"84":{"start":{"line":158,"column":8},"end":{"line":158,"column":76}},"85":{"start":{"line":161,"column":6},"end":{"line":161,"column":41}},"86":{"start":{"line":165,"column":4},"end":{"line":179,"column":5}},"87":{"start":{"line":166,"column":22},"end":{"line":171,"column":7}},"88":{"start":{"line":172,"column":6},"end":{"line":177,"column":9}},"89":{"start":{"line":173,"column":8},"end":{"line":176,"column":11}},"90":{"start":{"line":178,"column":6},"end":{"line":178,"column":46}},"91":{"start":{"line":182,"column":4},"end":{"line":189,"column":5}},"92":{"start":{"line":183,"column":6},"end":{"line":188,"column":10}},"93":{"start":{"line":191,"column":4},"end":{"line":201,"column":7}},"94":{"start":{"line":192,"column":17},"end":{"line":192,"column":43}},"95":{"start":{"line":192,"column":38},"end":{"line":192,"column":42}},"96":{"start":{"line":194,"column":6},"end":{"line":194,"column":24}},"97":{"start":{"line":195,"column":6},"end":{"line":195,"column":21}},"98":{"start":{"line":197,"column":17},"end":{"line":197,"column":43}},"99":{"start":{"line":197,"column":38},"end":{"line":197,"column":42}},"100":{"start":{"line":199,"column":6},"end":{"line":199,"column":14}},"101":{"start":{"line":200,"column":6},"end":{"line":200,"column":33}},"102":{"start":{"line":206,"column":0},"end":{"line":206,"column":20}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":15,"column":9},"end":{"line":15,"column":31}},"loc":{"start":{"line":15,"column":37},"end":{"line":15,"column":95}},"line":15},"1":{"name":"ownKeys","decl":{"start":{"line":17,"column":9},"end":{"line":17,"column":16}},"loc":{"start":{"line":17,"column":41},"end":{"line":17,"column":341}},"line":17},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":207},"end":{"line":17,"column":208}},"loc":{"start":{"line":17,"column":222},"end":{"line":17,"column":289}},"line":17},"3":{"name":"_objectSpread","decl":{"start":{"line":19,"column":9},"end":{"line":19,"column":22}},"loc":{"start":{"line":19,"column":31},"end":{"line":19,"column":506}},"line":19},"4":{"name":"(anonymous_4)","decl":{"start":{"line":19,"column":177},"end":{"line":19,"column":178}},"loc":{"start":{"line":19,"column":192},"end":{"line":19,"column":238}},"line":19},"5":{"name":"(anonymous_5)","decl":{"start":{"line":19,"column":385},"end":{"line":19,"column":386}},"loc":{"start":{"line":19,"column":400},"end":{"line":19,"column":485}},"line":19},"6":{"name":"_defineProperty","decl":{"start":{"line":21,"column":9},"end":{"line":21,"column":24}},"loc":{"start":{"line":21,"column":42},"end":{"line":21,"column":209}},"line":21},"7":{"name":"(anonymous_7)","decl":{"start":{"line":24,"column":2},"end":{"line":24,"column":3}},"loc":{"start":{"line":24,"column":23},"end":{"line":26,"column":3}},"line":24},"8":{"name":"(anonymous_8)","decl":{"start":{"line":28,"column":2},"end":{"line":28,"column":3}},"loc":{"start":{"line":28,"column":19},"end":{"line":36,"column":3}},"line":28},"9":{"name":"(anonymous_9)","decl":{"start":{"line":38,"column":2},"end":{"line":38,"column":3}},"loc":{"start":{"line":38,"column":37},"end":{"line":46,"column":3}},"line":38},"10":{"name":"(anonymous_10)","decl":{"start":{"line":39,"column":52},"end":{"line":39,"column":53}},"loc":{"start":{"line":39,"column":63},"end":{"line":42,"column":5}},"line":39},"11":{"name":"(anonymous_11)","decl":{"start":{"line":40,"column":14},"end":{"line":40,"column":15}},"loc":{"start":{"line":40,"column":22},"end":{"line":40,"column":26}},"line":40},"12":{"name":"(anonymous_12)","decl":{"start":{"line":42,"column":13},"end":{"line":42,"column":14}},"loc":{"start":{"line":42,"column":22},"end":{"line":45,"column":5}},"line":42},"13":{"name":"(anonymous_13)","decl":{"start":{"line":43,"column":14},"end":{"line":43,"column":15}},"loc":{"start":{"line":43,"column":22},"end":{"line":43,"column":26}},"line":43},"14":{"name":"(anonymous_14)","decl":{"start":{"line":48,"column":2},"end":{"line":48,"column":3}},"loc":{"start":{"line":48,"column":30},"end":{"line":103,"column":3}},"line":48},"15":{"name":"(anonymous_15)","decl":{"start":{"line":105,"column":2},"end":{"line":105,"column":3}},"loc":{"start":{"line":105,"column":32},"end":{"line":202,"column":3}},"line":105},"16":{"name":"(anonymous_16)","decl":{"start":{"line":115,"column":19},"end":{"line":115,"column":20}},"loc":{"start":{"line":115,"column":36},"end":{"line":133,"column":5}},"line":115},"17":{"name":"(anonymous_17)","decl":{"start":{"line":172,"column":24},"end":{"line":172,"column":25}},"loc":{"start":{"line":172,"column":33},"end":{"line":177,"column":7}},"line":172},"18":{"name":"(anonymous_18)","decl":{"start":{"line":191,"column":38},"end":{"line":191,"column":39}},"loc":{"start":{"line":191,"column":49},"end":{"line":196,"column":5}},"line":191},"19":{"name":"(anonymous_19)","decl":{"start":{"line":192,"column":30},"end":{"line":192,"column":31}},"loc":{"start":{"line":192,"column":38},"end":{"line":192,"column":42}},"line":192},"20":{"name":"(anonymous_20)","decl":{"start":{"line":196,"column":13},"end":{"line":196,"column":14}},"loc":{"start":{"line":196,"column":20},"end":{"line":201,"column":5}},"line":196},"21":{"name":"(anonymous_21)","decl":{"start":{"line":197,"column":30},"end":{"line":197,"column":31}},"loc":{"start":{"line":197,"column":38},"end":{"line":197,"column":42}},"line":197}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":46},"end":{"line":15,"column":92}},"type":"cond-expr","locations":[{"start":{"line":15,"column":70},"end":{"line":15,"column":73}},{"start":{"line":15,"column":76},"end":{"line":15,"column":92}}],"line":15},"1":{"loc":{"start":{"line":15,"column":46},"end":{"line":15,"column":67}},"type":"binary-expr","locations":[{"start":{"line":15,"column":46},"end":{"line":15,"column":49}},{"start":{"line":15,"column":53},"end":{"line":15,"column":67}}],"line":15},"2":{"loc":{"start":{"line":17,"column":75},"end":{"line":17,"column":326}},"type":"if","locations":[{"start":{"line":17,"column":75},"end":{"line":17,"column":326}},{"start":{"line":17,"column":75},"end":{"line":17,"column":326}}],"line":17},"3":{"loc":{"start":{"line":17,"column":163},"end":{"line":17,"column":291}},"type":"binary-expr","locations":[{"start":{"line":17,"column":163},"end":{"line":17,"column":177}},{"start":{"line":17,"column":182},"end":{"line":17,"column":290}}],"line":17},"4":{"loc":{"start":{"line":19,"column":91},"end":{"line":19,"column":131}},"type":"cond-expr","locations":[{"start":{"line":19,"column":114},"end":{"line":19,"column":126}},{"start":{"line":19,"column":129},"end":{"line":19,"column":131}}],"line":19},"5":{"loc":{"start":{"line":19,"column":133},"end":{"line":19,"column":486}},"type":"cond-expr","locations":[{"start":{"line":19,"column":141},"end":{"line":19,"column":239}},{"start":{"line":19,"column":242},"end":{"line":19,"column":486}}],"line":19},"6":{"loc":{"start":{"line":19,"column":242},"end":{"line":19,"column":486}},"type":"cond-expr","locations":[{"start":{"line":19,"column":277},"end":{"line":19,"column":350}},{"start":{"line":19,"column":353},"end":{"line":19,"column":486}}],"line":19},"7":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":195}},"type":"if","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":195}},{"start":{"line":21,"column":44},"end":{"line":21,"column":195}}],"line":21},"8":{"loc":{"start":{"line":31,"column":4},"end":{"line":33,"column":5}},"type":"if","locations":[{"start":{"line":31,"column":4},"end":{"line":33,"column":5}},{"start":{"line":31,"column":4},"end":{"line":33,"column":5}}],"line":31},"9":{"loc":{"start":{"line":40,"column":7},"end":{"line":40,"column":27}},"type":"binary-expr","locations":[{"start":{"line":40,"column":7},"end":{"line":40,"column":9}},{"start":{"line":40,"column":14},"end":{"line":40,"column":26}}],"line":40},"10":{"loc":{"start":{"line":43,"column":7},"end":{"line":43,"column":27}},"type":"binary-expr","locations":[{"start":{"line":43,"column":7},"end":{"line":43,"column":9}},{"start":{"line":43,"column":14},"end":{"line":43,"column":26}}],"line":43},"11":{"loc":{"start":{"line":49,"column":4},"end":{"line":54,"column":5}},"type":"if","locations":[{"start":{"line":49,"column":4},"end":{"line":54,"column":5}},{"start":{"line":49,"column":4},"end":{"line":54,"column":5}}],"line":49},"12":{"loc":{"start":{"line":49,"column":8},"end":{"line":49,"column":48}},"type":"binary-expr","locations":[{"start":{"line":49,"column":8},"end":{"line":49,"column":33}},{"start":{"line":49,"column":37},"end":{"line":49,"column":48}}],"line":49},"13":{"loc":{"start":{"line":56,"column":4},"end":{"line":61,"column":5}},"type":"if","locations":[{"start":{"line":56,"column":4},"end":{"line":61,"column":5}},{"start":{"line":56,"column":4},"end":{"line":61,"column":5}}],"line":56},"14":{"loc":{"start":{"line":56,"column":8},"end":{"line":56,"column":59}},"type":"binary-expr","locations":[{"start":{"line":56,"column":8},"end":{"line":56,"column":33}},{"start":{"line":56,"column":37},"end":{"line":56,"column":45}},{"start":{"line":56,"column":49},"end":{"line":56,"column":59}}],"line":56},"15":{"loc":{"start":{"line":63,"column":4},"end":{"line":68,"column":5}},"type":"if","locations":[{"start":{"line":63,"column":4},"end":{"line":68,"column":5}},{"start":{"line":63,"column":4},"end":{"line":68,"column":5}}],"line":63},"16":{"loc":{"start":{"line":70,"column":4},"end":{"line":75,"column":5}},"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":75,"column":5}},{"start":{"line":70,"column":4},"end":{"line":75,"column":5}}],"line":70},"17":{"loc":{"start":{"line":77,"column":4},"end":{"line":82,"column":5}},"type":"if","locations":[{"start":{"line":77,"column":4},"end":{"line":82,"column":5}},{"start":{"line":77,"column":4},"end":{"line":82,"column":5}}],"line":77},"18":{"loc":{"start":{"line":85,"column":4},"end":{"line":90,"column":5}},"type":"if","locations":[{"start":{"line":85,"column":4},"end":{"line":90,"column":5}},{"start":{"line":85,"column":4},"end":{"line":90,"column":5}}],"line":85},"19":{"loc":{"start":{"line":85,"column":8},"end":{"line":85,"column":85}},"type":"binary-expr","locations":[{"start":{"line":85,"column":9},"end":{"line":85,"column":28}},{"start":{"line":85,"column":32},"end":{"line":85,"column":52}},{"start":{"line":85,"column":57},"end":{"line":85,"column":85}}],"line":85},"20":{"loc":{"start":{"line":92,"column":4},"end":{"line":97,"column":5}},"type":"if","locations":[{"start":{"line":92,"column":4},"end":{"line":97,"column":5}},{"start":{"line":92,"column":4},"end":{"line":97,"column":5}}],"line":92},"21":{"loc":{"start":{"line":113,"column":19},"end":{"line":113,"column":75}},"type":"cond-expr","locations":[{"start":{"line":113,"column":50},"end":{"line":113,"column":63}},{"start":{"line":113,"column":66},"end":{"line":113,"column":75}}],"line":113},"22":{"loc":{"start":{"line":113,"column":33},"end":{"line":113,"column":46}},"type":"binary-expr","locations":[{"start":{"line":113,"column":33},"end":{"line":113,"column":40}},{"start":{"line":113,"column":44},"end":{"line":113,"column":46}}],"line":113},"23":{"loc":{"start":{"line":113,"column":50},"end":{"line":113,"column":63}},"type":"binary-expr","locations":[{"start":{"line":113,"column":50},"end":{"line":113,"column":57}},{"start":{"line":113,"column":61},"end":{"line":113,"column":63}}],"line":113},"24":{"loc":{"start":{"line":120,"column":6},"end":{"line":132,"column":7}},"type":"if","locations":[{"start":{"line":120,"column":6},"end":{"line":132,"column":7}},{"start":{"line":120,"column":6},"end":{"line":132,"column":7}}],"line":120},"25":{"loc":{"start":{"line":122,"column":13},"end":{"line":132,"column":7}},"type":"if","locations":[{"start":{"line":122,"column":13},"end":{"line":132,"column":7}},{"start":{"line":122,"column":13},"end":{"line":132,"column":7}}],"line":122},"26":{"loc":{"start":{"line":124,"column":13},"end":{"line":132,"column":7}},"type":"if","locations":[{"start":{"line":124,"column":13},"end":{"line":132,"column":7}},{"start":{"line":124,"column":13},"end":{"line":132,"column":7}}],"line":124},"27":{"loc":{"start":{"line":126,"column":13},"end":{"line":132,"column":7}},"type":"if","locations":[{"start":{"line":126,"column":13},"end":{"line":132,"column":7}},{"start":{"line":126,"column":13},"end":{"line":132,"column":7}}],"line":126},"28":{"loc":{"start":{"line":128,"column":13},"end":{"line":132,"column":7}},"type":"if","locations":[{"start":{"line":128,"column":13},"end":{"line":132,"column":7}},{"start":{"line":128,"column":13},"end":{"line":132,"column":7}}],"line":128},"29":{"loc":{"start":{"line":137,"column":6},"end":{"line":139,"column":7}},"type":"if","locations":[{"start":{"line":137,"column":6},"end":{"line":139,"column":7}},{"start":{"line":137,"column":6},"end":{"line":139,"column":7}}],"line":137},"30":{"loc":{"start":{"line":142,"column":6},"end":{"line":144,"column":7}},"type":"if","locations":[{"start":{"line":142,"column":6},"end":{"line":144,"column":7}},{"start":{"line":142,"column":6},"end":{"line":144,"column":7}}],"line":142},"31":{"loc":{"start":{"line":147,"column":6},"end":{"line":149,"column":7}},"type":"if","locations":[{"start":{"line":147,"column":6},"end":{"line":149,"column":7}},{"start":{"line":147,"column":6},"end":{"line":149,"column":7}}],"line":147},"32":{"loc":{"start":{"line":152,"column":6},"end":{"line":154,"column":7}},"type":"if","locations":[{"start":{"line":152,"column":6},"end":{"line":154,"column":7}},{"start":{"line":152,"column":6},"end":{"line":154,"column":7}}],"line":152},"33":{"loc":{"start":{"line":157,"column":6},"end":{"line":159,"column":7}},"type":"if","locations":[{"start":{"line":157,"column":6},"end":{"line":159,"column":7}},{"start":{"line":157,"column":6},"end":{"line":159,"column":7}}],"line":157},"34":{"loc":{"start":{"line":165,"column":4},"end":{"line":179,"column":5}},"type":"if","locations":[{"start":{"line":165,"column":4},"end":{"line":179,"column":5}},{"start":{"line":165,"column":4},"end":{"line":179,"column":5}}],"line":165},"35":{"loc":{"start":{"line":182,"column":4},"end":{"line":189,"column":5}},"type":"if","locations":[{"start":{"line":182,"column":4},"end":{"line":189,"column":5}},{"start":{"line":182,"column":4},"end":{"line":189,"column":5}}],"line":182},"36":{"loc":{"start":{"line":192,"column":17},"end":{"line":192,"column":43}},"type":"binary-expr","locations":[{"start":{"line":192,"column":17},"end":{"line":192,"column":25}},{"start":{"line":192,"column":30},"end":{"line":192,"column":42}}],"line":192},"37":{"loc":{"start":{"line":197,"column":17},"end":{"line":197,"column":43}},"type":"binary-expr","locations":[{"start":{"line":197,"column":17},"end":{"line":197,"column":25}},{"start":{"line":197,"column":30},"end":{"line":197,"column":42}}],"line":197}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":5,"7":56,"8":56,"9":56,"10":56,"11":0,"12":56,"13":56,"14":56,"15":56,"16":56,"17":187,"18":0,"19":56,"20":187,"21":19,"22":168,"23":187,"24":27,"25":28,"26":28,"27":1,"28":28,"29":91,"30":79,"31":79,"32":79,"33":12,"34":12,"35":12,"36":347,"37":24,"38":323,"39":8,"40":315,"41":26,"42":289,"43":53,"44":236,"45":32,"46":204,"47":82,"48":122,"49":114,"50":8,"51":115,"52":115,"53":115,"54":115,"55":115,"56":115,"57":115,"58":115,"59":115,"60":319,"61":319,"62":319,"63":319,"64":22,"65":297,"66":132,"67":165,"68":51,"69":114,"70":30,"71":84,"72":78,"73":6,"74":115,"75":115,"76":48,"77":113,"78":28,"79":113,"80":19,"81":113,"82":12,"83":113,"84":12,"85":2,"86":115,"87":6,"88":6,"89":6,"90":6,"91":115,"92":2,"93":115,"94":101,"95":38,"96":101,"97":101,"98":14,"99":7,"100":14,"101":14,"102":1},"f":{"0":5,"1":56,"2":0,"3":56,"4":187,"5":0,"6":187,"7":27,"8":28,"9":91,"10":79,"11":79,"12":12,"13":12,"14":347,"15":115,"16":319,"17":6,"18":101,"19":38,"20":14,"21":7},"b":{"0":[0,5],"1":[5,5],"2":[56,0],"3":[56,56],"4":[42,14],"5":[56,0],"6":[0,0],"7":[19,168],"8":[1,27],"9":[79,79],"10":[12,12],"11":[24,323],"12":[347,32],"13":[8,315],"14":[323,8,8],"15":[26,289],"16":[53,236],"17":[32,204],"18":[82,122],"19":[204,130,82],"20":[114,8],"21":[97,18],"22":[115,2],"23":[97,2],"24":[22,297],"25":[132,165],"26":[51,114],"27":[30,84],"28":[78,6],"29":[48,67],"30":[28,85],"31":[19,94],"32":[12,101],"33":[12,101],"34":[6,109],"35":[2,113],"36":[101,38],"37":[14,7]},"inputSourceMap":{"version":3,"sources":["push-notifications.js"],"names":["PN","constructor","options","setOptions","opts","settings","DEFAULT_SETTINGS","apn","shutdown","APN","sendWith","method","regIds","data","cb","then","results","noop","catch","error","Promise","reject","getPushMethodByRegId","regId","type","pushMethod","WEB_METHOD","id","isAlwaysUseFCM","GCM_METHOD","substring","WNS_METHOD","test","ADM_METHOD","length","APN_METHOD","UNKNOWN_METHOD","send","_regIds","callback","promises","regIdsGCM","regIdsAPN","regIdsWNS","regIdsADM","regIdsWebPush","regIdsUnk","Array","isArray","forEach","regIdOriginal","push","sendGCM","sendAPN","bind","sendWNS","sendADM","sendWebPush","err","success","failure","message","Error","resolve","all","module","exports"],"mappings":"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","sourceRoot":"/Volumes/projectes/node-pushnotifications/src/","sourcesContent":["/* eslint-disable import/no-import-module-exports */\n\nimport sendGCM from './sendGCM';\nimport APN from './sendAPN';\nimport sendADM from './sendADM';\nimport sendWNS from './sendWNS';\nimport sendWebPush from './sendWeb';\nimport {\n  DEFAULT_SETTINGS,\n  UNKNOWN_METHOD,\n  WEB_METHOD,\n  WNS_METHOD,\n  ADM_METHOD,\n  GCM_METHOD,\n  APN_METHOD,\n} from './constants';\n\nclass PN {\n  constructor(options) {\n    this.setOptions(options);\n  }\n\n  setOptions(opts) {\n    this.settings = { ...DEFAULT_SETTINGS, ...opts };\n    if (this.apn) {\n      this.apn.shutdown();\n    }\n    this.apn = new APN(this.settings.apn);\n  }\n\n  sendWith(method, regIds, data, cb) {\n    return method(regIds, data, this.settings)\n      .then((results) => {\n        (cb || ((noop) => noop))(null, results);\n        return results;\n      })\n      .catch((error) => {\n        (cb || ((noop) => noop))(error);\n        return Promise.reject(error);\n      });\n  }\n\n  getPushMethodByRegId(regId) {\n    if (typeof regId === 'object' && !regId.type) {\n      return { regId, pushMethod: WEB_METHOD };\n    }\n\n    if (typeof regId === 'object' && regId.id && regId.type) {\n      return { regId: regId.id, pushMethod: regId.type };\n    }\n\n    if (this.settings.isAlwaysUseFCM) {\n      return { regId, pushMethod: GCM_METHOD };\n    }\n\n    if (regId.substring(0, 4) === 'http') {\n      return { regId, pushMethod: WNS_METHOD };\n    }\n\n    if (/^(amzn[0-9]*.adm)/i.test(regId)) {\n      return { regId, pushMethod: ADM_METHOD };\n    }\n\n    // TODO: show a warning \"deprecated, use at your own risk\"\n    if (\n      (regId.length === 64 || regId.length === 160) &&\n      /^[a-fA-F0-9]+$/.test(regId)\n    ) {\n      return { regId, pushMethod: APN_METHOD };\n    }\n\n    if (regId.length > 64) {\n      return { regId, pushMethod: GCM_METHOD };\n    }\n\n    return { regId, pushMethod: UNKNOWN_METHOD };\n  }\n\n  send(_regIds, data, callback) {\n    const promises = [];\n    const regIdsGCM = [];\n    const regIdsAPN = [];\n    const regIdsWNS = [];\n    const regIdsADM = [];\n    const regIdsWebPush = [];\n    const regIdsUnk = [];\n    const regIds = Array.isArray(_regIds || []) ? _regIds || [] : [_regIds];\n\n    // Classify each pushId for corresponding device\n    regIds.forEach((regIdOriginal) => {\n      const { regId, pushMethod } = this.getPushMethodByRegId(regIdOriginal);\n\n      if (pushMethod === WEB_METHOD) {\n        regIdsWebPush.push(regId);\n      } else if (pushMethod === GCM_METHOD) {\n        regIdsGCM.push(regId);\n      } else if (pushMethod === WNS_METHOD) {\n        regIdsWNS.push(regId);\n      } else if (pushMethod === ADM_METHOD) {\n        regIdsADM.push(regId);\n      } else if (pushMethod === APN_METHOD) {\n        regIdsAPN.push(regId);\n      } else {\n        regIdsUnk.push(regId);\n      }\n    });\n\n    try {\n      // Android GCM\n      if (regIdsGCM.length > 0) {\n        promises.push(this.sendWith(sendGCM, regIdsGCM, data));\n      }\n\n      // iOS APN\n      if (regIdsAPN.length > 0) {\n        promises.push(\n          this.sendWith(this.apn.sendAPN.bind(this.apn), regIdsAPN, data)\n        );\n      }\n\n      // Microsoft WNS\n      if (regIdsWNS.length > 0) {\n        promises.push(this.sendWith(sendWNS, regIdsWNS, data));\n      }\n\n      // Amazon ADM\n      if (regIdsADM.length > 0) {\n        promises.push(this.sendWith(sendADM, regIdsADM, data));\n      }\n\n      // Web Push\n      if (regIdsWebPush.length > 0) {\n        promises.push(this.sendWith(sendWebPush, regIdsWebPush, data));\n      }\n    } catch (err) {\n      promises.push(Promise.reject(err));\n    }\n\n    // Unknown\n    if (regIdsUnk.length > 0) {\n      const results = {\n        method: 'unknown',\n        success: 0,\n        failure: regIdsUnk.length,\n        message: [],\n      };\n      regIdsUnk.forEach((regId) => {\n        results.message.push({\n          regId,\n          error: new Error('Unknown registration id'),\n        });\n      });\n      promises.push(Promise.resolve(results));\n    }\n\n    // No regIds detected\n    if (promises.length === 0) {\n      promises.push(\n        Promise.resolve({\n          method: 'none',\n          success: 0,\n          failure: 0,\n          message: [],\n        })\n      );\n    }\n\n    return Promise.all(promises)\n      .then((results) => {\n        const cb = callback || ((noop) => noop);\n        cb(null, results);\n        return results;\n      })\n      .catch((err) => {\n        const cb = callback || ((noop) => noop);\n        cb(err);\n        return Promise.reject(err);\n      });\n  }\n}\n\nmodule.exports = PN;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1c909d70b141fcc2295855929c2a2b4f39ad0c24","contentHash":"2a1b350261916c4d696319b582391edb0f9461eabddc82a052757bc4ceffb8af"},"/Volumes/projectes/node-pushnotifications/src/sendGCM.js":{"path":"/Volumes/projectes/node-pushnotifications/src/sendGCM.js","statementMap":{"0":{"start":{"line":3,"column":54},"end":{"line":3,"column":73}},"1":{"start":{"line":3,"column":75},"end":{"line":3,"column":326}},"2":{"start":{"line":3,"column":125},"end":{"line":3,"column":161}},"3":{"start":{"line":3,"column":163},"end":{"line":3,"column":324}},"4":{"start":{"line":3,"column":224},"end":{"line":3,"column":287}},"5":{"start":{"line":3,"column":327},"end":{"line":3,"column":339}},"6":{"start":{"line":5,"column":33},"end":{"line":5,"column":489}},"7":{"start":{"line":5,"column":46},"end":{"line":5,"column":47}},"8":{"start":{"line":5,"column":91},"end":{"line":5,"column":131}},"9":{"start":{"line":5,"column":133},"end":{"line":5,"column":487}},"10":{"start":{"line":5,"column":194},"end":{"line":5,"column":236}},"11":{"start":{"line":5,"column":402},"end":{"line":5,"column":483}},"12":{"start":{"line":5,"column":490},"end":{"line":5,"column":504}},"13":{"start":{"line":7,"column":44},"end":{"line":7,"column":195}},"14":{"start":{"line":7,"column":62},"end":{"line":7,"column":166}},"15":{"start":{"line":7,"column":176},"end":{"line":7,"column":193}},"16":{"start":{"line":7,"column":196},"end":{"line":7,"column":207}},"17":{"start":{"line":9,"column":12},"end":{"line":9,"column":31}},"18":{"start":{"line":11,"column":10},"end":{"line":11,"column":26}},"19":{"start":{"line":13,"column":17},"end":{"line":13,"column":39}},"20":{"start":{"line":14,"column":20},"end":{"line":14,"column":40}},"21":{"start":{"line":15,"column":19},"end":{"line":15,"column":38}},"22":{"start":{"line":16,"column":20},"end":{"line":16,"column":40}},"23":{"start":{"line":18,"column":22},"end":{"line":18,"column":101}},"24":{"start":{"line":18,"column":62},"end":{"line":18,"column":100}},"25":{"start":{"line":19,"column":26},"end":{"line":21,"column":116}},"26":{"start":{"line":21,"column":6},"end":{"line":21,"column":27}},"27":{"start":{"line":22,"column":21},"end":{"line":22,"column":50}},"28":{"start":{"line":23,"column":32},"end":{"line":23,"column":119}},"29":{"start":{"line":25,"column":34},"end":{"line":25,"column":79}},"30":{"start":{"line":25,"column":46},"end":{"line":25,"column":79}},"31":{"start":{"line":27,"column":25},"end":{"line":27,"column":204}},"32":{"start":{"line":29,"column":18},"end":{"line":79,"column":2}},"33":{"start":{"line":29,"column":63},"end":{"line":79,"column":2}},"34":{"start":{"line":30,"column":24},"end":{"line":30,"column":52}},"35":{"start":{"line":31,"column":2},"end":{"line":78,"column":5}},"36":{"start":{"line":33,"column":4},"end":{"line":77,"column":5}},"37":{"start":{"line":34,"column":6},"end":{"line":44,"column":9}},"38":{"start":{"line":38,"column":45},"end":{"line":43,"column":9}},"39":{"start":{"line":45,"column":11},"end":{"line":77,"column":5}},"40":{"start":{"line":46,"column":21},"end":{"line":46,"column":22}},"41":{"start":{"line":47,"column":6},"end":{"line":63,"column":9}},"42":{"start":{"line":53,"column":27},"end":{"line":53,"column":50}},"43":{"start":{"line":54,"column":10},"end":{"line":54,"column":24}},"44":{"start":{"line":55,"column":10},"end":{"line":61,"column":12}},"45":{"start":{"line":65,"column":6},"end":{"line":76,"column":9}},"46":{"start":{"line":70,"column":45},"end":{"line":75,"column":9}},"47":{"start":{"line":81,"column":16},"end":{"line":197,"column":1}},"48":{"start":{"line":82,"column":15},"end":{"line":82,"column":46}},"49":{"start":{"line":84,"column":13},"end":{"line":84,"column":20}},"50":{"start":{"line":85,"column":2},"end":{"line":85,"column":17}},"51":{"start":{"line":86,"column":20},"end":{"line":86,"column":44}},"52":{"start":{"line":87,"column":19},"end":{"line":87,"column":21}},"53":{"start":{"line":88,"column":23},"end":{"line":123,"column":3}},"54":{"start":{"line":126,"column":2},"end":{"line":136,"column":3}},"55":{"start":{"line":127,"column":4},"end":{"line":129,"column":6}},"56":{"start":{"line":130,"column":9},"end":{"line":136,"column":3}},"57":{"start":{"line":131,"column":4},"end":{"line":131,"column":44}},"58":{"start":{"line":133,"column":4},"end":{"line":135,"column":6}},"59":{"start":{"line":138,"column":2},"end":{"line":138,"column":44}},"60":{"start":{"line":139,"column":2},"end":{"line":139,"column":47}},"61":{"start":{"line":140,"column":2},"end":{"line":140,"column":44}},"62":{"start":{"line":141,"column":2},"end":{"line":141,"column":41}},"63":{"start":{"line":142,"column":2},"end":{"line":142,"column":46}},"64":{"start":{"line":144,"column":2},"end":{"line":146,"column":3}},"65":{"start":{"line":145,"column":4},"end":{"line":145,"column":36}},"66":{"start":{"line":148,"column":18},"end":{"line":160,"column":4}},"67":{"start":{"line":161,"column":14},"end":{"line":161,"column":15}},"68":{"start":{"line":165,"column":2},"end":{"line":176,"column":3}},"69":{"start":{"line":166,"column":4},"end":{"line":166,"column":85}},"70":{"start":{"line":169,"column":4},"end":{"line":175,"column":43}},"71":{"start":{"line":170,"column":33},"end":{"line":170,"column":79}},"72":{"start":{"line":171,"column":6},"end":{"line":173,"column":38}},"73":{"start":{"line":174,"column":6},"end":{"line":174,"column":17}},"74":{"start":{"line":178,"column":2},"end":{"line":196,"column":5}},"75":{"start":{"line":179,"column":20},"end":{"line":185,"column":5}},"76":{"start":{"line":186,"column":4},"end":{"line":194,"column":7}},"77":{"start":{"line":187,"column":6},"end":{"line":189,"column":7}},"78":{"start":{"line":188,"column":8},"end":{"line":188,"column":53}},"79":{"start":{"line":191,"column":6},"end":{"line":191,"column":40}},"80":{"start":{"line":192,"column":6},"end":{"line":192,"column":40}},"81":{"start":{"line":193,"column":6},"end":{"line":193,"column":46}},"82":{"start":{"line":195,"column":4},"end":{"line":195,"column":19}},"83":{"start":{"line":199,"column":0},"end":{"line":199,"column":25}}},"fnMap":{"0":{"name":"ownKeys","decl":{"start":{"line":3,"column":9},"end":{"line":3,"column":16}},"loc":{"start":{"line":3,"column":41},"end":{"line":3,"column":341}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":3,"column":207},"end":{"line":3,"column":208}},"loc":{"start":{"line":3,"column":222},"end":{"line":3,"column":289}},"line":3},"2":{"name":"_objectSpread","decl":{"start":{"line":5,"column":9},"end":{"line":5,"column":22}},"loc":{"start":{"line":5,"column":31},"end":{"line":5,"column":506}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":5,"column":177},"end":{"line":5,"column":178}},"loc":{"start":{"line":5,"column":192},"end":{"line":5,"column":238}},"line":5},"4":{"name":"(anonymous_4)","decl":{"start":{"line":5,"column":385},"end":{"line":5,"column":386}},"loc":{"start":{"line":5,"column":400},"end":{"line":5,"column":485}},"line":5},"5":{"name":"_defineProperty","decl":{"start":{"line":7,"column":9},"end":{"line":7,"column":24}},"loc":{"start":{"line":7,"column":42},"end":{"line":7,"column":209}},"line":7},"6":{"name":"(anonymous_6)","decl":{"start":{"line":18,"column":52},"end":{"line":18,"column":53}},"loc":{"start":{"line":18,"column":62},"end":{"line":18,"column":100}},"line":18},"7":{"name":"(anonymous_7)","decl":{"start":{"line":19,"column":63},"end":{"line":19,"column":64}},"loc":{"start":{"line":21,"column":6},"end":{"line":21,"column":27}},"line":21},"8":{"name":"(anonymous_8)","decl":{"start":{"line":25,"column":34},"end":{"line":25,"column":35}},"loc":{"start":{"line":25,"column":46},"end":{"line":25,"column":79}},"line":25},"9":{"name":"(anonymous_9)","decl":{"start":{"line":29,"column":18},"end":{"line":29,"column":19}},"loc":{"start":{"line":29,"column":63},"end":{"line":79,"column":2}},"line":29},"10":{"name":"(anonymous_10)","decl":{"start":{"line":29,"column":75},"end":{"line":29,"column":76}},"loc":{"start":{"line":29,"column":86},"end":{"line":79,"column":1}},"line":29},"11":{"name":"(anonymous_11)","decl":{"start":{"line":31,"column":47},"end":{"line":31,"column":48}},"loc":{"start":{"line":31,"column":66},"end":{"line":78,"column":3}},"line":31},"12":{"name":"(anonymous_12)","decl":{"start":{"line":38,"column":35},"end":{"line":38,"column":36}},"loc":{"start":{"line":38,"column":45},"end":{"line":43,"column":9}},"line":38},"13":{"name":"(anonymous_13)","decl":{"start":{"line":52,"column":38},"end":{"line":52,"column":39}},"loc":{"start":{"line":52,"column":47},"end":{"line":62,"column":9}},"line":52},"14":{"name":"(anonymous_14)","decl":{"start":{"line":70,"column":35},"end":{"line":70,"column":36}},"loc":{"start":{"line":70,"column":45},"end":{"line":75,"column":9}},"line":70},"15":{"name":"(anonymous_15)","decl":{"start":{"line":81,"column":16},"end":{"line":81,"column":17}},"loc":{"start":{"line":81,"column":44},"end":{"line":197,"column":1}},"line":81},"16":{"name":"(anonymous_16)","decl":{"start":{"line":178,"column":36},"end":{"line":178,"column":37}},"loc":{"start":{"line":178,"column":47},"end":{"line":196,"column":3}},"line":178},"17":{"name":"(anonymous_17)","decl":{"start":{"line":186,"column":20},"end":{"line":186,"column":21}},"loc":{"start":{"line":186,"column":30},"end":{"line":194,"column":5}},"line":186}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":75},"end":{"line":3,"column":326}},"type":"if","locations":[{"start":{"line":3,"column":75},"end":{"line":3,"column":326}},{"start":{"line":3,"column":75},"end":{"line":3,"column":326}}],"line":3},"1":{"loc":{"start":{"line":3,"column":163},"end":{"line":3,"column":291}},"type":"binary-expr","locations":[{"start":{"line":3,"column":163},"end":{"line":3,"column":177}},{"start":{"line":3,"column":182},"end":{"line":3,"column":290}}],"line":3},"2":{"loc":{"start":{"line":5,"column":91},"end":{"line":5,"column":131}},"type":"cond-expr","locations":[{"start":{"line":5,"column":114},"end":{"line":5,"column":126}},{"start":{"line":5,"column":129},"end":{"line":5,"column":131}}],"line":5},"3":{"loc":{"start":{"line":5,"column":133},"end":{"line":5,"column":486}},"type":"cond-expr","locations":[{"start":{"line":5,"column":141},"end":{"line":5,"column":239}},{"start":{"line":5,"column":242},"end":{"line":5,"column":486}}],"line":5},"4":{"loc":{"start":{"line":5,"column":242},"end":{"line":5,"column":486}},"type":"cond-expr","locations":[{"start":{"line":5,"column":277},"end":{"line":5,"column":350}},{"start":{"line":5,"column":353},"end":{"line":5,"column":486}}],"line":5},"5":{"loc":{"start":{"line":7,"column":44},"end":{"line":7,"column":195}},"type":"if","locations":[{"start":{"line":7,"column":44},"end":{"line":7,"column":195}},{"start":{"line":7,"column":44},"end":{"line":7,"column":195}}],"line":7},"6":{"loc":{"start":{"line":33,"column":4},"end":{"line":77,"column":5}},"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":77,"column":5}},{"start":{"line":33,"column":4},"end":{"line":77,"column":5}}],"line":33},"7":{"loc":{"start":{"line":42,"column":20},"end":{"line":42,"column":60}},"type":"cond-expr","locations":[{"start":{"line":42,"column":43},"end":{"line":42,"column":54}},{"start":{"line":42,"column":57},"end":{"line":42,"column":60}}],"line":42},"8":{"loc":{"start":{"line":45,"column":11},"end":{"line":77,"column":5}},"type":"if","locations":[{"start":{"line":45,"column":11},"end":{"line":77,"column":5}},{"start":{"line":45,"column":11},"end":{"line":77,"column":5}}],"line":45},"9":{"loc":{"start":{"line":45,"column":15},"end":{"line":45,"column":57}},"type":"binary-expr","locations":[{"start":{"line":45,"column":15},"end":{"line":45,"column":23}},{"start":{"line":45,"column":27},"end":{"line":45,"column":57}}],"line":45},"10":{"loc":{"start":{"line":58,"column":19},"end":{"line":58,"column":52}},"type":"binary-expr","locations":[{"start":{"line":58,"column":19},"end":{"line":58,"column":40}},{"start":{"line":58,"column":44},"end":{"line":58,"column":52}}],"line":58},"11":{"loc":{"start":{"line":59,"column":19},"end":{"line":59,"column":62}},"type":"cond-expr","locations":[{"start":{"line":59,"column":33},"end":{"line":59,"column":55}},{"start":{"line":59,"column":58},"end":{"line":59,"column":62}}],"line":59},"12":{"loc":{"start":{"line":60,"column":22},"end":{"line":60,"column":77}},"type":"cond-expr","locations":[{"start":{"line":60,"column":36},"end":{"line":60,"column":70}},{"start":{"line":60,"column":73},"end":{"line":60,"column":77}}],"line":60},"13":{"loc":{"start":{"line":60,"column":36},"end":{"line":60,"column":70}},"type":"binary-expr","locations":[{"start":{"line":60,"column":36},"end":{"line":60,"column":55}},{"start":{"line":60,"column":59},"end":{"line":60,"column":70}}],"line":60},"14":{"loc":{"start":{"line":109,"column":18},"end":{"line":109,"column":51}},"type":"binary-expr","locations":[{"start":{"line":109,"column":18},"end":{"line":109,"column":34}},{"start":{"line":109,"column":38},"end":{"line":109,"column":51}}],"line":109},"15":{"loc":{"start":{"line":121,"column":24},"end":{"line":121,"column":60}},"type":"binary-expr","locations":[{"start":{"line":121,"column":24},"end":{"line":121,"column":46}},{"start":{"line":121,"column":50},"end":{"line":121,"column":60}}],"line":121},"16":{"loc":{"start":{"line":126,"column":2},"end":{"line":136,"column":3}},"type":"if","locations":[{"start":{"line":126,"column":2},"end":{"line":136,"column":3}},{"start":{"line":126,"column":2},"end":{"line":136,"column":3}}],"line":126},"17":{"loc":{"start":{"line":130,"column":9},"end":{"line":136,"column":3}},"type":"if","locations":[{"start":{"line":130,"column":9},"end":{"line":136,"column":3}},{"start":{"line":130,"column":9},"end":{"line":136,"column":3}}],"line":130},"18":{"loc":{"start":{"line":138,"column":17},"end":{"line":138,"column":43}},"type":"binary-expr","locations":[{"start":{"line":138,"column":17},"end":{"line":138,"column":29}},{"start":{"line":138,"column":33},"end":{"line":138,"column":43}}],"line":138},"19":{"loc":{"start":{"line":139,"column":19},"end":{"line":139,"column":46}},"type":"binary-expr","locations":[{"start":{"line":139,"column":19},"end":{"line":139,"column":33}},{"start":{"line":139,"column":37},"end":{"line":139,"column":46}}],"line":139},"20":{"loc":{"start":{"line":140,"column":17},"end":{"line":140,"column":43}},"type":"binary-expr","locations":[{"start":{"line":140,"column":17},"end":{"line":140,"column":29}},{"start":{"line":140,"column":33},"end":{"line":140,"column":43}}],"line":140},"21":{"loc":{"start":{"line":141,"column":16},"end":{"line":141,"column":40}},"type":"binary-expr","locations":[{"start":{"line":141,"column":16},"end":{"line":141,"column":27}},{"start":{"line":141,"column":31},"end":{"line":141,"column":40}}],"line":141},"22":{"loc":{"start":{"line":142,"column":18},"end":{"line":142,"column":45}},"type":"binary-expr","locations":[{"start":{"line":142,"column":18},"end":{"line":142,"column":31}},{"start":{"line":142,"column":35},"end":{"line":142,"column":45}}],"line":142},"23":{"loc":{"start":{"line":144,"column":2},"end":{"line":146,"column":3}},"type":"if","locations":[{"start":{"line":144,"column":2},"end":{"line":146,"column":3}},{"start":{"line":144,"column":2},"end":{"line":146,"column":3}}],"line":144},"24":{"loc":{"start":{"line":144,"column":6},"end":{"line":144,"column":53}},"type":"binary-expr","locations":[{"start":{"line":144,"column":6},"end":{"line":144,"column":28}},{"start":{"line":144,"column":32},"end":{"line":144,"column":53}}],"line":144},"25":{"loc":{"start":{"line":151,"column":14},"end":{"line":151,"column":60}},"type":"cond-expr","locations":[{"start":{"line":151,"column":43},"end":{"line":151,"column":51}},{"start":{"line":151,"column":54},"end":{"line":151,"column":60}}],"line":151},"26":{"loc":{"start":{"line":152,"column":22},"end":{"line":152,"column":73}},"type":"cond-expr","locations":[{"start":{"line":152,"column":36},"end":{"line":152,"column":40}},{"start":{"line":152,"column":43},"end":{"line":152,"column":73}}],"line":152},"27":{"loc":{"start":{"line":152,"column":43},"end":{"line":152,"column":73}},"type":"binary-expr","locations":[{"start":{"line":152,"column":43},"end":{"line":152,"column":64}},{"start":{"line":152,"column":68},"end":{"line":152,"column":73}}],"line":152},"28":{"loc":{"start":{"line":153,"column":20},"end":{"line":153,"column":48}},"type":"binary-expr","locations":[{"start":{"line":153,"column":20},"end":{"line":153,"column":39}},{"start":{"line":153,"column":43},"end":{"line":153,"column":48}}],"line":153},"29":{"loc":{"start":{"line":156,"column":12},"end":{"line":156,"column":32}},"type":"binary-expr","locations":[{"start":{"line":156,"column":12},"end":{"line":156,"column":23}},{"start":{"line":156,"column":27},"end":{"line":156,"column":32}}],"line":156},"30":{"loc":{"start":{"line":157,"column":10},"end":{"line":157,"column":79}},"type":"cond-expr","locations":[{"start":{"line":157,"column":35},"end":{"line":157,"column":70}},{"start":{"line":157,"column":73},"end":{"line":157,"column":79}}],"line":157},"31":{"loc":{"start":{"line":159,"column":18},"end":{"line":159,"column":91}},"type":"cond-expr","locations":[{"start":{"line":159,"column":67},"end":{"line":159,"column":76}},{"start":{"line":159,"column":79},"end":{"line":159,"column":91}}],"line":159},"32":{"loc":{"start":{"line":159,"column":18},"end":{"line":159,"column":64}},"type":"binary-expr","locations":[{"start":{"line":159,"column":18},"end":{"line":159,"column":40}},{"start":{"line":159,"column":44},"end":{"line":159,"column":64}}],"line":159},"33":{"loc":{"start":{"line":165,"column":2},"end":{"line":176,"column":3}},"type":"if","locations":[{"start":{"line":165,"column":2},"end":{"line":176,"column":3}},{"start":{"line":165,"column":2},"end":{"line":176,"column":3}}],"line":165},"34":{"loc":{"start":{"line":166,"column":65},"end":{"line":166,"column":82}},"type":"binary-expr","locations":[{"start":{"line":166,"column":65},"end":{"line":166,"column":77}},{"start":{"line":166,"column":81},"end":{"line":166,"column":82}}],"line":166},"35":{"loc":{"start":{"line":173,"column":18},"end":{"line":173,"column":35}},"type":"binary-expr","locations":[{"start":{"line":173,"column":18},"end":{"line":173,"column":30}},{"start":{"line":173,"column":34},"end":{"line":173,"column":35}}],"line":173},"36":{"loc":{"start":{"line":187,"column":6},"end":{"line":189,"column":7}},"type":"if","locations":[{"start":{"line":187,"column":6},"end":{"line":189,"column":7}},{"start":{"line":187,"column":6},"end":{"line":189,"column":7}}],"line":187}},"s":{"0":73,"1":73,"2":73,"3":73,"4":0,"5":73,"6":73,"7":73,"8":73,"9":73,"10":96,"11":0,"12":73,"13":96,"14":0,"15":96,"16":96,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":2,"25":1,"26":2,"27":1,"28":1,"29":1,"30":2,"31":1,"32":1,"33":38,"34":38,"35":38,"36":36,"37":2,"38":6,"39":34,"40":32,"41":32,"42":88,"43":88,"44":88,"45":2,"46":6,"47":1,"48":38,"49":38,"50":38,"51":38,"52":38,"53":38,"54":38,"55":1,"56":37,"57":35,"58":2,"59":38,"60":38,"61":38,"62":38,"63":38,"64":38,"65":2,"66":38,"67":38,"68":38,"69":4,"70":34,"71":34,"72":34,"73":34,"74":38,"75":36,"76":36,"77":36,"78":34,"79":36,"80":36,"81":36,"82":36,"83":1},"f":{"0":73,"1":0,"2":73,"3":96,"4":0,"5":96,"6":2,"7":2,"8":2,"9":38,"10":38,"11":36,"12":6,"13":88,"14":6,"15":38,"16":36,"17":36},"b":{"0":[73,0],"1":[73,73],"2":[73,0],"3":[73,0],"4":[0,0],"5":[0,96],"6":[2,34],"7":[6,0],"8":[32,2],"9":[34,34],"10":[88,0],"11":[6,82],"12":[6,82],"13":[6,6],"14":[38,38],"15":[38,37],"16":[1,37],"17":[35,2],"18":[38,38],"19":[38,37],"20":[38,38],"21":[38,38],"22":[38,15],"23":[2,36],"24":[38,2],"25":[1,37],"26":[1,37],"27":[37,10],"28":[38,38],"29":[38,38],"30":[2,36],"31":[3,35],"32":[38,36],"33":[4,34],"34":[4,4],"35":[34,34],"36":[34,2]},"inputSourceMap":{"version":3,"sources":["sendGCM.js"],"names":["gcm","require","R","DEFAULT_TTL","GCM_METHOD","GCM_MAX_TTL","ttlFromExpiry","compose","min","expiry","Math","floor","Date","now","extractTimeToLive","cond","propIs","Number","prop","T","always","pathIsString","pathSatisfies","is","String","containsValidRecipients","either","propValueToSingletonArray","propName","of","getRecipientList","has","sendChunk","GCMSender","recipients","message","retries","Promise","resolve","recipientList","send","err","response","method","success","failure","length","map","value","originalRegId","regId","error","errorMsg","Error","results","undefined","regIndex","multicastId","multicast_id","regToken","messageId","message_id","registration_id","sendGCM","regIds","data","settings","opts","id","Sender","promises","notification","title","body","icon","image","picture","style","sound","badge","tag","color","click_action","clickAction","category","body_loc_key","locKey","body_loc_args","locArgs","title_loc_key","titleLocKey","title_loc_args","titleLocArgs","android_channel_id","notification_count","notificationCount","custom","msgcnt","phonegap","contentAvailable","Message","collapseKey","priority","silent","delayWhileIdle","timeToLive","restrictedPackageName","dryRun","Object","assign","chunk","push","registrationTokens","slice","all","then","resumed","forEach","result","module","exports"],"mappings":"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","sourceRoot":"/Volumes/projectes/node-pushnotifications/src/","sourcesContent":["const gcm = require('node-gcm');\nconst R = require('ramda');\nconst { DEFAULT_TTL, GCM_METHOD, GCM_MAX_TTL } = require('./constants');\n\nconst ttlFromExpiry = R.compose(\n  R.min(GCM_MAX_TTL),\n  (expiry) => expiry - Math.floor(Date.now() / 1000)\n);\n\nconst extractTimeToLive = R.cond([\n  [R.propIs(Number, 'expiry'), ({ expiry }) => ttlFromExpiry(expiry)],\n  [R.propIs(Number, 'timeToLive'), R.prop('timeToLive')],\n  [R.T, R.always(DEFAULT_TTL)],\n]);\n\nconst pathIsString = R.pathSatisfies(R.is(String));\n\nconst containsValidRecipients = R.either(\n  pathIsString(['recipients', 'to']),\n  pathIsString(['recipients', 'condition'])\n);\n\nconst propValueToSingletonArray = (propName) =>\n  R.compose(R.of, R.prop(propName));\n\nconst getRecipientList = R.cond([\n  [R.has('registrationTokens'), R.prop('registrationTokens')],\n  [R.has('to'), propValueToSingletonArray('to')],\n  [R.has('condition'), propValueToSingletonArray('condition')],\n]);\n\nconst sendChunk = (GCMSender, recipients, message, retries) =>\n  new Promise((resolve) => {\n    const recipientList = getRecipientList(recipients);\n\n    GCMSender.send(message, recipients, retries, (err, response) => {\n      // Response: see https://developers.google.com/cloud-messaging/http-server-ref#table5\n      if (err) {\n        resolve({\n          method: GCM_METHOD,\n          success: 0,\n          failure: recipientList.length,\n          message: recipientList.map((value) => ({\n            originalRegId: value,\n            regId: value,\n            error: err,\n            errorMsg: err instanceof Error ? err.message : err,\n          })),\n        });\n      } else if (response && response.results !== undefined) {\n        let regIndex = 0;\n        resolve({\n          method: GCM_METHOD,\n          multicastId: response.multicast_id,\n          success: response.success,\n          failure: response.failure,\n          message: response.results.map((value) => {\n            const regToken = recipientList[regIndex];\n            regIndex += 1;\n            return {\n              messageId: value.message_id,\n              originalRegId: regToken,\n              regId: value.registration_id || regToken,\n              error: value.error ? new Error(value.error) : null,\n              errorMsg: value.error ? value.error.message || value.error : null,\n            };\n          }),\n        });\n      } else {\n        resolve({\n          method: GCM_METHOD,\n          multicastId: response.multicast_id,\n          success: response.success,\n          failure: response.failure,\n          message: recipientList.map((value) => ({\n            originalRegId: value,\n            regId: value,\n            error: new Error('unknown'),\n            errorMsg: 'unknown',\n          })),\n        });\n      }\n    });\n  });\n\nconst sendGCM = (regIds, data, settings) => {\n  const opts = { ...settings.gcm };\n  const { id } = opts;\n  delete opts.id;\n  const GCMSender = new gcm.Sender(id, opts);\n  const promises = [];\n  const notification = {\n    title: data.title, // Android, iOS (Watch)\n    body: data.body, // Android, iOS\n    icon: data.icon, // Android\n    image: data.image, // Android\n    picture: data.picture, // Android\n    style: data.style, // Android\n    sound: data.sound, // Android, iOS\n    badge: data.badge, // iOS\n    tag: data.tag, // Android\n    color: data.color, // Android\n    click_action: data.clickAction || data.category, // Android, iOS\n    body_loc_key: data.locKey, // Android, iOS\n    body_loc_args: data.locArgs, // Android, iOS\n    title_loc_key: data.titleLocKey, // Android, iOS\n    title_loc_args: data.titleLocArgs, // Android, iOS\n    android_channel_id: data.android_channel_id, // Android\n    notification_count: data.notificationCount || data.badge, // Android\n  };\n\n  let custom;\n  if (typeof data.custom === 'string') {\n    custom = {\n      message: data.custom,\n    };\n  } else if (typeof data.custom === 'object') {\n    custom = { ...data.custom };\n  } else {\n    custom = {\n      data: data.custom,\n    };\n  }\n\n  custom.title = custom.title || data.title;\n  custom.message = custom.message || data.body;\n  custom.sound = custom.sound || data.sound;\n  custom.icon = custom.icon || data.icon;\n  custom.msgcnt = custom.msgcnt || data.badge;\n  if (opts.phonegap === true && data.contentAvailable) {\n    custom['content-available'] = 1;\n  }\n\n  const message = new gcm.Message({\n    // See https://developers.google.com/cloud-messaging/http-server-ref#table5\n    collapseKey: data.collapseKey,\n    priority: data.priority === 'normal' ? 'normal' : 'high',\n    contentAvailable: data.silent ? true : data.contentAvailable || false,\n    delayWhileIdle: data.delayWhileIdle || false,\n    timeToLive: extractTimeToLive(data),\n    restrictedPackageName: data.restrictedPackageName,\n    dryRun: data.dryRun || false,\n    data: opts.phonegap === true ? Object.assign(custom, notification) : custom, // See https://github.com/phonegap/phonegap-plugin-push/blob/master/docs/PAYLOAD.md#android-behaviour\n    notification:\n      opts.phonegap === true || data.silent === true ? undefined : notification,\n  });\n  let chunk = 0;\n\n  /* allow to override device tokens with custom `to` or `condition` field:\n   * https://github.com/ToothlessGear/node-gcm#recipients */\n  if (containsValidRecipients(data)) {\n    promises.push(\n      sendChunk(GCMSender, data.recipients, message, data.retries || 0)\n    );\n  } else {\n    // Split tokens in 1.000 chunks, see https://developers.google.com/cloud-messaging/http-server-ref#table1\n    do {\n      const registrationTokens = regIds.slice(chunk * 1000, (chunk + 1) * 1000);\n      promises.push(\n        sendChunk(GCMSender, { registrationTokens }, message, data.retries || 0)\n      );\n      chunk += 1;\n    } while (1000 * chunk < regIds.length);\n  }\n\n  return Promise.all(promises).then((results) => {\n    const resumed = {\n      method: GCM_METHOD,\n      multicastId: [],\n      success: 0,\n      failure: 0,\n      message: [],\n    };\n\n    results.forEach((result) => {\n      if (result.multicastId) {\n        resumed.multicastId.push(result.multicastId);\n      }\n      resumed.success += result.success;\n      resumed.failure += result.failure;\n      resumed.message.push(...result.message);\n    });\n\n    return resumed;\n  });\n};\n\nmodule.exports = sendGCM;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7593a82a2b113354c8cfe9d9c8ec879a4dd80da4","contentHash":"e9324c44b801a6de9f53b79fcc10544c1a0d082ff31b743460efbb1fdec53e75"},"/Volumes/projectes/node-pushnotifications/src/constants.js":{"path":"/Volumes/projectes/node-pushnotifications/src/constants.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":76,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["constants.js"],"names":["module","exports","DEFAULT_TTL","GCM_MAX_TTL","APN_METHOD","GCM_METHOD","ADM_METHOD","WNS_METHOD","WEB_METHOD","UNKNOWN_METHOD","DEFAULT_SETTINGS","gcm","id","apn","token","cert","key","ca","pfx","passphrase","production","process","env","NODE_ENV","voip","address","port","rejectUnauthorized","connectionRetryLimit","cacheLength","connectionTimeout","autoAdjustCache","maxConnections","minConnections","connectTimeout","buffersNotifications","fastMode","disableNagle","disableEPIPEFix","adm","client_id","client_secret","wns","accessToken","headers","notificationMethod","web","vapidDetails","subject","publicKey","privateKey","isAlwaysUseFCM"],"mappings":";;AAAAA,MAAM,CAACC,OAAP,GAAiB;AACfC,EAAAA,WAAW,EAAE,KAAK,KADH;AAEfC,EAAAA,WAAW,EAAE,OAFE;AAEO;AACtBC,EAAAA,UAAU,EAAE,KAHG;AAIfC,EAAAA,UAAU,EAAE,KAJG;AAKfC,EAAAA,UAAU,EAAE,KALG;AAMfC,EAAAA,UAAU,EAAE,KANG;AAOfC,EAAAA,UAAU,EAAE,SAPG;AAQfC,EAAAA,cAAc,EAAE,SARD;AASfC,EAAAA,gBAAgB,EAAE;AAChBC,IAAAA,GAAG,EAAE;AACHC,MAAAA,EAAE,EAAE,IADD,CACO;;AADP,KADW;AAIhBC,IAAAA,GAAG,EAAE;AACH;AACAC,MAAAA,KAAK,EAAE,IAFJ;AAGH;AACA;AACA;AACA;AACA;AACAC,MAAAA,IAAI,EAAE,UARH;AASHC,MAAAA,GAAG,EAAE,SATF;AAUHC,MAAAA,EAAE,EAAE,IAVD;AAWHC,MAAAA,GAAG,EAAE,IAXF;AAYHC,MAAAA,UAAU,EAAE,IAZT;AAaHC,MAAAA,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAblC;AAcHC,MAAAA,IAAI,EAAE,KAdH;AAeHC,MAAAA,OAAO,EAAE,IAfN;AAgBHC,MAAAA,IAAI,EAAE,GAhBH;AAiBHC,MAAAA,kBAAkB,EAAE,IAjBjB;AAkBHC,MAAAA,oBAAoB,EAAE,EAlBnB;AAoBHC,MAAAA,WAAW,EAAE,IApBV;AAqBHC,MAAAA,iBAAiB,EAAE,OArBhB;AAsBHC,MAAAA,eAAe,EAAE,IAtBd;AAuBHC,MAAAA,cAAc,EAAE,CAvBb;AAwBHC,MAAAA,cAAc,EAAE,CAxBb;AAyBHC,MAAAA,cAAc,EAAE,KAzBb;AA0BHC,MAAAA,oBAAoB,EAAE,IA1BnB;AA2BHC,MAAAA,QAAQ,EAAE,KA3BP;AA4BHC,MAAAA,YAAY,EAAE,KA5BX;AA6BHC,MAAAA,eAAe,EAAE;AA7Bd,KAJW;AAmChBC,IAAAA,GAAG,EAAE;AACHC,MAAAA,SAAS,EAAE,IADR;AACc;AACjBC,MAAAA,aAAa,EAAE,IAFZ,CAEkB;;AAFlB,KAnCW;AAuChBC,IAAAA,GAAG,EAAE;AACHF,MAAAA,SAAS,EAAE,IADR;AACc;AACjBC,MAAAA,aAAa,EAAE,IAFZ;AAEkB;AACrBE,MAAAA,WAAW,EAAE,IAHV;AAIHC,MAAAA,OAAO,EAAE,IAJN;AAKHC,MAAAA,kBAAkB,EAAE;AALjB,KAvCW;AA8ChBC,IAAAA,GAAG,EAAE;AACHC,MAAAA,YAAY,EAAE;AACZC,QAAAA,OAAO,EAAE,6BADG;AAEZC,QAAAA,SAAS,EAAE,wCAFC;AAGZC,QAAAA,UAAU,EAAE;AAHA,OADX,CAMH;AACA;AACA;AACA;;AATG,KA9CW;AAyDhBC,IAAAA,cAAc,EAAE;AAzDA;AATH,CAAjB","sourceRoot":"/Volumes/projectes/node-pushnotifications/src/","sourcesContent":["module.exports = {\n  DEFAULT_TTL: 28 * 86400,\n  GCM_MAX_TTL: 2419200, // 4 weeks in seconds (https://firebase.google.com/docs/cloud-messaging/http-server-ref#downstream-http-messages-json)\n  APN_METHOD: 'apn',\n  GCM_METHOD: 'gcm',\n  ADM_METHOD: 'adm',\n  WNS_METHOD: 'wns',\n  WEB_METHOD: 'webPush',\n  UNKNOWN_METHOD: 'unknown',\n  DEFAULT_SETTINGS: {\n    gcm: {\n      id: null, // PUT YOUR GCM SERVER API KEY,\n    },\n    apn: {\n      // See options at https://github.com/node-apn/node-apn/blob/master/doc/provider.markdown\n      token: null,\n      // {\n      //     key: '',\n      //     keyId: '',\n      //     teamId: '',\n      // },\n      cert: 'cert.pem',\n      key: 'key.pem',\n      ca: null,\n      pfx: null,\n      passphrase: null,\n      production: process.env.NODE_ENV === 'production',\n      voip: false,\n      address: null,\n      port: 443,\n      rejectUnauthorized: true,\n      connectionRetryLimit: 10,\n\n      cacheLength: 1000,\n      connectionTimeout: 3600000,\n      autoAdjustCache: true,\n      maxConnections: 1,\n      minConnections: 1,\n      connectTimeout: 10000,\n      buffersNotifications: true,\n      fastMode: false,\n      disableNagle: false,\n      disableEPIPEFix: false,\n    },\n    adm: {\n      client_id: null, // PUT YOUR ADM CLIENT ID,\n      client_secret: null, // PUT YOUR ADM CLIENT SECRET,\n    },\n    wns: {\n      client_id: null, // PUT YOUR WNS CLIENT ID,\n      client_secret: null, // PUT YOUR WNS CLIENT SECRET,\n      accessToken: null,\n      headers: null,\n      notificationMethod: 'sendTileSquareBlock',\n    },\n    web: {\n      vapidDetails: {\n        subject: \"< 'mailto' Address or URL >\",\n        publicKey: '< URL Safe Base64 Encoded Public Key >',\n        privateKey: '< URL Safe Base64 Encoded Private Key >',\n      },\n      // gcmAPIKey: '< GCM API Key >',\n      // TTL: 2419200\n      // headers: { }\n      // contentEncoding: '< Encoding type, e.g.: aesgcm or aes128gcm >'\n    },\n    isAlwaysUseFCM: false,\n  },\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"70f6c47c4ac5f1e7fa41ee7e6bc8d1b785c2b13b","contentHash":"11a74c12dcbc527eca16271505c9e7ef4d48ba8e74bce5ce60d1b6cf041fc042"},"/Volumes/projectes/node-pushnotifications/src/sendAPN.js":{"path":"/Volumes/projectes/node-pushnotifications/src/sendAPN.js","statementMap":{"0":{"start":{"line":3,"column":12},"end":{"line":3,"column":38}},"1":{"start":{"line":5,"column":10},"end":{"line":5,"column":26}},"2":{"start":{"line":7,"column":17},"end":{"line":7,"column":39}},"3":{"start":{"line":8,"column":20},"end":{"line":8,"column":40}},"4":{"start":{"line":9,"column":19},"end":{"line":9,"column":38}},"5":{"start":{"line":11,"column":22},"end":{"line":11,"column":64}},"6":{"start":{"line":11,"column":29},"end":{"line":11,"column":64}},"7":{"start":{"line":13,"column":22},"end":{"line":15,"column":75}},"8":{"start":{"line":15,"column":6},"end":{"line":15,"column":31}},"9":{"start":{"line":15,"column":46},"end":{"line":15,"column":72}},"10":{"start":{"line":17,"column":42},"end":{"line":17,"column":141}},"11":{"start":{"line":17,"column":62},"end":{"line":17,"column":141}},"12":{"start":{"line":19,"column":26},"end":{"line":19,"column":69}},"13":{"start":{"line":20,"column":27},"end":{"line":25,"column":2}},"14":{"start":{"line":27,"column":24},"end":{"line":37,"column":2}},"15":{"start":{"line":27,"column":33},"end":{"line":37,"column":1}},"16":{"start":{"line":39,"column":23},"end":{"line":39,"column":113}},"17":{"start":{"line":39,"column":31},"end":{"line":39,"column":113}},"18":{"start":{"line":41,"column":32},"end":{"line":41,"column":94}},"19":{"start":{"line":41,"column":40},"end":{"line":41,"column":94}},"20":{"start":{"line":43,"column":29},"end":{"line":43,"column":84}},"21":{"start":{"line":47,"column":4},"end":{"line":52,"column":5}},"22":{"start":{"line":48,"column":6},"end":{"line":48,"column":51}},"23":{"start":{"line":50,"column":6},"end":{"line":50,"column":31}},"24":{"start":{"line":51,"column":6},"end":{"line":51,"column":29}},"25":{"start":{"line":56,"column":4},"end":{"line":58,"column":5}},"26":{"start":{"line":57,"column":6},"end":{"line":57,"column":33}},"27":{"start":{"line":62,"column":20},"end":{"line":81,"column":6}},"28":{"start":{"line":83,"column":4},"end":{"line":85,"column":5}},"29":{"start":{"line":84,"column":6},"end":{"line":84,"column":120}},"30":{"start":{"line":87,"column":4},"end":{"line":123,"column":7}},"31":{"start":{"line":88,"column":22},"end":{"line":93,"column":7}},"32":{"start":{"line":94,"column":6},"end":{"line":100,"column":9}},"33":{"start":{"line":95,"column":8},"end":{"line":95,"column":29}},"34":{"start":{"line":96,"column":8},"end":{"line":99,"column":11}},"35":{"start":{"line":101,"column":6},"end":{"line":121,"column":9}},"36":{"start":{"line":103,"column":8},"end":{"line":103,"column":29}},"37":{"start":{"line":105,"column":8},"end":{"line":120,"column":9}},"38":{"start":{"line":107,"column":10},"end":{"line":111,"column":13}},"39":{"start":{"line":115,"column":10},"end":{"line":119,"column":13}},"40":{"start":{"line":122,"column":6},"end":{"line":122,"column":21}},"41":{"start":{"line":128,"column":0},"end":{"line":128,"column":21}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":11,"column":22},"end":{"line":11,"column":23}},"loc":{"start":{"line":11,"column":29},"end":{"line":11,"column":64}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":111},"end":{"line":13,"column":112}},"loc":{"start":{"line":15,"column":6},"end":{"line":15,"column":31}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":40},"end":{"line":15,"column":41}},"loc":{"start":{"line":15,"column":46},"end":{"line":15,"column":72}},"line":15},"3":{"name":"(anonymous_3)","decl":{"start":{"line":17,"column":42},"end":{"line":17,"column":43}},"loc":{"start":{"line":17,"column":62},"end":{"line":17,"column":141}},"line":17},"4":{"name":"(anonymous_4)","decl":{"start":{"line":27,"column":24},"end":{"line":27,"column":25}},"loc":{"start":{"line":27,"column":33},"end":{"line":37,"column":1}},"line":27},"5":{"name":"(anonymous_5)","decl":{"start":{"line":39,"column":23},"end":{"line":39,"column":24}},"loc":{"start":{"line":39,"column":31},"end":{"line":39,"column":113}},"line":39},"6":{"name":"(anonymous_6)","decl":{"start":{"line":41,"column":32},"end":{"line":41,"column":33}},"loc":{"start":{"line":41,"column":40},"end":{"line":41,"column":94}},"line":41},"7":{"name":"(anonymous_7)","decl":{"start":{"line":46,"column":2},"end":{"line":46,"column":3}},"loc":{"start":{"line":46,"column":24},"end":{"line":53,"column":3}},"line":46},"8":{"name":"(anonymous_8)","decl":{"start":{"line":55,"column":2},"end":{"line":55,"column":3}},"loc":{"start":{"line":55,"column":13},"end":{"line":59,"column":3}},"line":55},"9":{"name":"(anonymous_9)","decl":{"start":{"line":61,"column":2},"end":{"line":61,"column":3}},"loc":{"start":{"line":61,"column":24},"end":{"line":124,"column":3}},"line":61},"10":{"name":"(anonymous_10)","decl":{"start":{"line":87,"column":54},"end":{"line":87,"column":55}},"loc":{"start":{"line":87,"column":66},"end":{"line":123,"column":5}},"line":87},"11":{"name":"(anonymous_11)","decl":{"start":{"line":94,"column":36},"end":{"line":94,"column":37}},"loc":{"start":{"line":94,"column":45},"end":{"line":100,"column":7}},"line":94},"12":{"name":"(anonymous_12)","decl":{"start":{"line":101,"column":38},"end":{"line":101,"column":39}},"loc":{"start":{"line":101,"column":49},"end":{"line":121,"column":7}},"line":101}},"branchMap":{"0":{"loc":{"start":{"line":34,"column":14},"end":{"line":34,"column":46}},"type":"binary-expr","locations":[{"start":{"line":34,"column":14},"end":{"line":34,"column":26}},{"start":{"line":34,"column":30},"end":{"line":34,"column":46}}],"line":34},"1":{"loc":{"start":{"line":56,"column":4},"end":{"line":58,"column":5}},"type":"if","locations":[{"start":{"line":56,"column":4},"end":{"line":58,"column":5}},{"start":{"line":56,"column":4},"end":{"line":58,"column":5}}],"line":56},"2":{"loc":{"start":{"line":63,"column":18},"end":{"line":63,"column":36}},"type":"binary-expr","locations":[{"start":{"line":63,"column":18},"end":{"line":63,"column":30}},{"start":{"line":63,"column":34},"end":{"line":63,"column":36}}],"line":63},"3":{"loc":{"start":{"line":65,"column":16},"end":{"line":65,"column":75}},"type":"cond-expr","locations":[{"start":{"line":65,"column":69},"end":{"line":65,"column":70}},{"start":{"line":65,"column":73},"end":{"line":65,"column":75}}],"line":65},"4":{"loc":{"start":{"line":65,"column":16},"end":{"line":65,"column":66}},"type":"binary-expr","locations":[{"start":{"line":65,"column":16},"end":{"line":65,"column":42}},{"start":{"line":65,"column":46},"end":{"line":65,"column":66}}],"line":65},"5":{"loc":{"start":{"line":67,"column":15},"end":{"line":67,"column":32}},"type":"binary-expr","locations":[{"start":{"line":67,"column":15},"end":{"line":67,"column":26}},{"start":{"line":67,"column":30},"end":{"line":67,"column":32}}],"line":67},"6":{"loc":{"start":{"line":72,"column":16},"end":{"line":72,"column":49}},"type":"binary-expr","locations":[{"start":{"line":72,"column":16},"end":{"line":72,"column":29}},{"start":{"line":72,"column":33},"end":{"line":72,"column":49}}],"line":72},"7":{"loc":{"start":{"line":78,"column":22},"end":{"line":78,"column":46}},"type":"binary-expr","locations":[{"start":{"line":78,"column":22},"end":{"line":78,"column":41}},{"start":{"line":78,"column":45},"end":{"line":78,"column":46}}],"line":78},"8":{"loc":{"start":{"line":83,"column":4},"end":{"line":85,"column":5}},"type":"if","locations":[{"start":{"line":83,"column":4},"end":{"line":85,"column":5}},{"start":{"line":83,"column":4},"end":{"line":85,"column":5}}],"line":83},"9":{"loc":{"start":{"line":84,"column":28},"end":{"line":84,"column":118}},"type":"binary-expr","locations":[{"start":{"line":84,"column":28},"end":{"line":84,"column":48}},{"start":{"line":84,"column":52},"end":{"line":84,"column":118}}],"line":84},"10":{"loc":{"start":{"line":94,"column":7},"end":{"line":94,"column":26}},"type":"binary-expr","locations":[{"start":{"line":94,"column":7},"end":{"line":94,"column":20}},{"start":{"line":94,"column":24},"end":{"line":94,"column":26}}],"line":94},"11":{"loc":{"start":{"line":101,"column":7},"end":{"line":101,"column":28}},"type":"binary-expr","locations":[{"start":{"line":101,"column":7},"end":{"line":101,"column":22}},{"start":{"line":101,"column":26},"end":{"line":101,"column":28}}],"line":101},"12":{"loc":{"start":{"line":105,"column":8},"end":{"line":120,"column":9}},"type":"if","locations":[{"start":{"line":105,"column":8},"end":{"line":120,"column":9}},{"start":{"line":105,"column":8},"end":{"line":120,"column":9}}],"line":105},"13":{"loc":{"start":{"line":110,"column":22},"end":{"line":110,"column":60}},"type":"binary-expr","locations":[{"start":{"line":110,"column":22},"end":{"line":110,"column":43}},{"start":{"line":110,"column":47},"end":{"line":110,"column":60}}],"line":110},"14":{"loc":{"start":{"line":117,"column":19},"end":{"line":117,"column":134}},"type":"cond-expr","locations":[{"start":{"line":117,"column":63},"end":{"line":117,"column":115}},{"start":{"line":117,"column":118},"end":{"line":117,"column":134}}],"line":117},"15":{"loc":{"start":{"line":117,"column":19},"end":{"line":117,"column":60}},"type":"binary-expr","locations":[{"start":{"line":117,"column":19},"end":{"line":117,"column":42}},{"start":{"line":117,"column":46},"end":{"line":117,"column":60}}],"line":117},"16":{"loc":{"start":{"line":117,"column":73},"end":{"line":117,"column":114}},"type":"binary-expr","locations":[{"start":{"line":117,"column":73},"end":{"line":117,"column":96}},{"start":{"line":117,"column":100},"end":{"line":117,"column":114}}],"line":117},"17":{"loc":{"start":{"line":118,"column":22},"end":{"line":118,"column":63}},"type":"binary-expr","locations":[{"start":{"line":118,"column":22},"end":{"line":118,"column":45}},{"start":{"line":118,"column":49},"end":{"line":118,"column":63}}],"line":118}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":21,"7":1,"8":1,"9":20,"10":1,"11":69,"12":1,"13":1,"14":1,"15":23,"16":1,"17":23,"18":1,"19":23,"20":1,"21":30,"22":30,"23":28,"24":28,"25":1,"26":1,"27":23,"28":23,"29":1,"30":22,"31":20,"32":20,"33":42,"34":42,"35":20,"36":18,"37":18,"38":6,"39":12,"40":20,"41":1},"f":{"0":21,"1":1,"2":20,"3":69,"4":23,"5":23,"6":23,"7":30,"8":1,"9":23,"10":20,"11":42,"12":18},"b":{"0":[23,22],"1":[1,0],"2":[23,23],"3":[2,21],"4":[23,22],"5":[23,3],"6":[23,23],"7":[23,22],"8":[1,22],"9":[1,0],"10":[20,6],"11":[20,14],"12":[6,12],"13":[6,0],"14":[12,0],"15":[12,6],"16":[12,6],"17":[12,6]},"inputSourceMap":{"version":3,"sources":["sendAPN.js"],"names":["apn","require","R","DEFAULT_TTL","APN_METHOD","expiryFromTtl","ttl","Math","floor","Date","now","extractExpiry","cond","propIs","Number","prop","timeToLive","T","getPropValueOrUndefinedIfIsSilent","propName","data","ifElse","propEq","always","undefined","toJSONorUndefined","tryCatch","JSON","parse","alertLocArgsToJSON","evolve","alert","getDefaultAlert","title","body","titleLocKey","titleLocArgs","locKey","locArgs","bodyLocArgs","launchImage","action","alertOrDefault","when","propSatisfies","isNil","assoc","getParsedAlertOrDefault","pipe","getDeviceTokenOrSelf","has","identity","APN","constructor","settings","connection","Provider","e","connectionError","shutdown","sendAPN","regIds","message","Notification","retryLimit","retries","expiry","priority","silent","encoding","payload","custom","badge","sound","topic","category","clickAction","contentAvailable","mdm","urlArgs","truncateAtWordEnd","collapseId","collapseKey","mutableContent","threadId","pushType","Promise","reject","Error","send","then","response","resumed","method","success","failure","sent","forEach","token","push","regId","error","failed","device","errorMsg","reason","status","module","exports"],"mappings":"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","sourceRoot":"/Volumes/projectes/node-pushnotifications/src/","sourcesContent":["const apn = require('@parse/node-apn');\nconst R = require('ramda');\nconst { DEFAULT_TTL, APN_METHOD } = require('./constants');\n\nconst expiryFromTtl = (ttl) => ttl + Math.floor(Date.now() / 1000);\n\nconst extractExpiry = R.cond([\n  [R.propIs(Number, 'expiry'), R.prop('expiry')],\n  [\n    R.propIs(Number, 'timeToLive'),\n    ({ timeToLive }) => expiryFromTtl(timeToLive),\n  ],\n  [R.T, () => expiryFromTtl(DEFAULT_TTL)],\n]);\n\nconst getPropValueOrUndefinedIfIsSilent = (propName, data) =>\n  R.ifElse(\n    R.propEq('silent', true),\n    R.always(undefined),\n    R.prop(propName)\n  )(data);\n\nconst toJSONorUndefined = R.tryCatch(JSON.parse, R.always(undefined));\n\nconst alertLocArgsToJSON = R.evolve({\n  alert: {\n    'title-loc-args': toJSONorUndefined,\n    'loc-args': toJSONorUndefined,\n  },\n});\n\nconst getDefaultAlert = (data) => ({\n  title: data.title,\n  body: data.body,\n  'title-loc-key': data.titleLocKey,\n  'title-loc-args': data.titleLocArgs,\n  'loc-key': data.locKey,\n  // bodyLocArgs is kept for backward compatibility\n  'loc-args': data.locArgs || data.bodyLocArgs,\n  'launch-image': data.launchImage,\n  action: data.action,\n});\n\nconst alertOrDefault = (data) =>\n  R.when(\n    R.propSatisfies(R.isNil, 'alert'),\n    R.assoc('alert', getDefaultAlert(data))\n  );\n\nconst getParsedAlertOrDefault = (data) =>\n  R.pipe(alertOrDefault(data), alertLocArgsToJSON)(data);\n\nconst getDeviceTokenOrSelf = R.ifElse(\n  R.has('device'),\n  R.prop('device'),\n  R.identity\n);\n\nclass APN {\n  constructor(settings) {\n    try {\n      this.connection = new apn.Provider(settings);\n    } catch (e) {\n      this.connectionError = e;\n      this.connection = null;\n    }\n  }\n\n  shutdown() {\n    if (this.connection) {\n      this.connection.shutdown();\n    }\n  }\n\n  sendAPN(regIds, data) {\n    const message = new apn.Notification({\n      retryLimit: data.retries || -1,\n      expiry: extractExpiry(data),\n      priority: data.priority === 'normal' || data.silent === true ? 5 : 10,\n      encoding: data.encoding,\n      payload: data.custom || {},\n      badge: getPropValueOrUndefinedIfIsSilent('badge', data),\n      sound: getPropValueOrUndefinedIfIsSilent('sound', data),\n      alert: getPropValueOrUndefinedIfIsSilent(\n        'alert',\n        getParsedAlertOrDefault(data)\n      ),\n      topic: data.topic,\n      category: data.category || data.clickAction,\n      contentAvailable: data.contentAvailable,\n      mdm: data.mdm,\n      urlArgs: data.urlArgs,\n      truncateAtWordEnd: data.truncateAtWordEnd,\n      collapseId: data.collapseKey,\n      mutableContent: data.mutableContent || 0,\n      threadId: data.threadId,\n      pushType: data.pushType,\n    });\n\n    if (!this.connection) {\n      return Promise.reject(\n        this.connectionError ||\n          new Error('Unknown error: APN connection not configured properly')\n      );\n    }\n\n    return this.connection.send(message, regIds).then((response) => {\n      const resumed = {\n        method: APN_METHOD,\n        success: 0,\n        failure: 0,\n        message: [],\n      };\n      (response.sent || []).forEach((token) => {\n        resumed.success += 1;\n        resumed.message.push({\n          regId: getDeviceTokenOrSelf(token),\n          error: null,\n        });\n      });\n      (response.failed || []).forEach((failure) => {\n        // See https://github.com/node-apn/node-apn/blob/master/doc/provider.markdown#failed\n        resumed.failure += 1;\n        if (failure.error) {\n          // A transport-level error occurred (e.g. network problem)\n          resumed.message.push({\n            regId: failure.device,\n            error: failure.error,\n            errorMsg: failure.error.message || failure.error,\n          });\n        } else {\n          // `failure.status` is the HTTP status code\n          // `failure.response` is the JSON payload\n          resumed.message.push({\n            regId: failure.device,\n            error:\n              failure.response.reason || failure.status\n                ? new Error(failure.response.reason || failure.status)\n                : failure.response,\n            errorMsg: failure.response.reason || failure.status,\n          });\n        }\n      });\n\n      return resumed;\n    });\n  }\n}\n\nmodule.exports = APN;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"22e1e9c0f0b5e20152f100aab4390787bdf7047e","contentHash":"afb8866287cc566cc56feb06e3ac52cdff22af9943e11bc972cd99f4422b4987"},"/Volumes/projectes/node-pushnotifications/src/sendADM.js":{"path":"/Volumes/projectes/node-pushnotifications/src/sendADM.js","statementMap":{"0":{"start":{"line":3,"column":54},"end":{"line":3,"column":73}},"1":{"start":{"line":3,"column":75},"end":{"line":3,"column":326}},"2":{"start":{"line":3,"column":125},"end":{"line":3,"column":161}},"3":{"start":{"line":3,"column":163},"end":{"line":3,"column":324}},"4":{"start":{"line":3,"column":224},"end":{"line":3,"column":287}},"5":{"start":{"line":3,"column":327},"end":{"line":3,"column":339}},"6":{"start":{"line":5,"column":33},"end":{"line":5,"column":489}},"7":{"start":{"line":5,"column":46},"end":{"line":5,"column":47}},"8":{"start":{"line":5,"column":91},"end":{"line":5,"column":131}},"9":{"start":{"line":5,"column":133},"end":{"line":5,"column":487}},"10":{"start":{"line":5,"column":194},"end":{"line":5,"column":236}},"11":{"start":{"line":5,"column":402},"end":{"line":5,"column":483}},"12":{"start":{"line":5,"column":490},"end":{"line":5,"column":504}},"13":{"start":{"line":7,"column":44},"end":{"line":7,"column":195}},"14":{"start":{"line":7,"column":62},"end":{"line":7,"column":166}},"15":{"start":{"line":7,"column":176},"end":{"line":7,"column":193}},"16":{"start":{"line":7,"column":196},"end":{"line":7,"column":207}},"17":{"start":{"line":9,"column":12},"end":{"line":9,"column":31}},"18":{"start":{"line":11,"column":17},"end":{"line":11,"column":39}},"19":{"start":{"line":12,"column":19},"end":{"line":12,"column":38}},"20":{"start":{"line":14,"column":16},"end":{"line":56,"column":1}},"21":{"start":{"line":15,"column":18},"end":{"line":20,"column":3}},"22":{"start":{"line":21,"column":19},"end":{"line":21,"column":21}},"23":{"start":{"line":22,"column":20},"end":{"line":22,"column":48}},"24":{"start":{"line":24,"column":15},"end":{"line":24,"column":39}},"25":{"start":{"line":26,"column":27},"end":{"line":26,"column":48}},"26":{"start":{"line":27,"column":17},"end":{"line":27,"column":28}},"27":{"start":{"line":28,"column":21},"end":{"line":28,"column":36}},"28":{"start":{"line":29,"column":17},"end":{"line":29,"column":28}},"29":{"start":{"line":30,"column":2},"end":{"line":30,"column":31}},"30":{"start":{"line":31,"column":2},"end":{"line":31,"column":21}},"31":{"start":{"line":32,"column":2},"end":{"line":32,"column":25}},"32":{"start":{"line":33,"column":2},"end":{"line":33,"column":21}},"33":{"start":{"line":34,"column":18},"end":{"line":38,"column":3}},"34":{"start":{"line":39,"column":2},"end":{"line":54,"column":5}},"35":{"start":{"line":40,"column":4},"end":{"line":53,"column":8}},"36":{"start":{"line":41,"column":6},"end":{"line":52,"column":9}},"37":{"start":{"line":42,"column":25},"end":{"line":42,"column":76}},"38":{"start":{"line":43,"column":22},"end":{"line":43,"column":80}},"39":{"start":{"line":44,"column":8},"end":{"line":44,"column":41}},"40":{"start":{"line":45,"column":8},"end":{"line":45,"column":41}},"41":{"start":{"line":46,"column":8},"end":{"line":50,"column":11}},"42":{"start":{"line":51,"column":8},"end":{"line":51,"column":18}},"43":{"start":{"line":55,"column":2},"end":{"line":55,"column":51}},"44":{"start":{"line":55,"column":42},"end":{"line":55,"column":49}},"45":{"start":{"line":58,"column":0},"end":{"line":58,"column":25}}},"fnMap":{"0":{"name":"ownKeys","decl":{"start":{"line":3,"column":9},"end":{"line":3,"column":16}},"loc":{"start":{"line":3,"column":41},"end":{"line":3,"column":341}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":3,"column":207},"end":{"line":3,"column":208}},"loc":{"start":{"line":3,"column":222},"end":{"line":3,"column":289}},"line":3},"2":{"name":"_objectSpread","decl":{"start":{"line":5,"column":9},"end":{"line":5,"column":22}},"loc":{"start":{"line":5,"column":31},"end":{"line":5,"column":506}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":5,"column":177},"end":{"line":5,"column":178}},"loc":{"start":{"line":5,"column":192},"end":{"line":5,"column":238}},"line":5},"4":{"name":"(anonymous_4)","decl":{"start":{"line":5,"column":385},"end":{"line":5,"column":386}},"loc":{"start":{"line":5,"column":400},"end":{"line":5,"column":485}},"line":5},"5":{"name":"_defineProperty","decl":{"start":{"line":7,"column":9},"end":{"line":7,"column":24}},"loc":{"start":{"line":7,"column":42},"end":{"line":7,"column":209}},"line":7},"6":{"name":"(anonymous_6)","decl":{"start":{"line":14,"column":16},"end":{"line":14,"column":17}},"loc":{"start":{"line":14,"column":45},"end":{"line":56,"column":1}},"line":14},"7":{"name":"(anonymous_7)","decl":{"start":{"line":39,"column":17},"end":{"line":39,"column":18}},"loc":{"start":{"line":39,"column":26},"end":{"line":54,"column":3}},"line":39},"8":{"name":"(anonymous_8)","decl":{"start":{"line":40,"column":30},"end":{"line":40,"column":31}},"loc":{"start":{"line":40,"column":41},"end":{"line":53,"column":5}},"line":40},"9":{"name":"(anonymous_9)","decl":{"start":{"line":41,"column":37},"end":{"line":41,"column":38}},"loc":{"start":{"line":41,"column":56},"end":{"line":52,"column":7}},"line":41},"10":{"name":"(anonymous_10)","decl":{"start":{"line":55,"column":36},"end":{"line":55,"column":37}},"loc":{"start":{"line":55,"column":42},"end":{"line":55,"column":49}},"line":55}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":75},"end":{"line":3,"column":326}},"type":"if","locations":[{"start":{"line":3,"column":75},"end":{"line":3,"column":326}},{"start":{"line":3,"column":75},"end":{"line":3,"column":326}}],"line":3},"1":{"loc":{"start":{"line":3,"column":163},"end":{"line":3,"column":291}},"type":"binary-expr","locations":[{"start":{"line":3,"column":163},"end":{"line":3,"column":177}},{"start":{"line":3,"column":182},"end":{"line":3,"column":290}}],"line":3},"2":{"loc":{"start":{"line":5,"column":91},"end":{"line":5,"column":131}},"type":"cond-expr","locations":[{"start":{"line":5,"column":114},"end":{"line":5,"column":126}},{"start":{"line":5,"column":129},"end":{"line":5,"column":131}}],"line":5},"3":{"loc":{"start":{"line":5,"column":133},"end":{"line":5,"column":486}},"type":"cond-expr","locations":[{"start":{"line":5,"column":141},"end":{"line":5,"column":239}},{"start":{"line":5,"column":242},"end":{"line":5,"column":486}}],"line":5},"4":{"loc":{"start":{"line":5,"column":242},"end":{"line":5,"column":486}},"type":"cond-expr","locations":[{"start":{"line":5,"column":277},"end":{"line":5,"column":350}},{"start":{"line":5,"column":353},"end":{"line":5,"column":486}}],"line":5},"5":{"loc":{"start":{"line":7,"column":44},"end":{"line":7,"column":195}},"type":"if","locations":[{"start":{"line":7,"column":44},"end":{"line":7,"column":195}},{"start":{"line":7,"column":44},"end":{"line":7,"column":195}}],"line":7},"6":{"loc":{"start":{"line":35,"column":18},"end":{"line":35,"column":84}},"type":"binary-expr","locations":[{"start":{"line":35,"column":18},"end":{"line":35,"column":56}},{"start":{"line":35,"column":60},"end":{"line":35,"column":70}},{"start":{"line":35,"column":74},"end":{"line":35,"column":84}}],"line":35},"7":{"loc":{"start":{"line":42,"column":25},"end":{"line":42,"column":76}},"type":"cond-expr","locations":[{"start":{"line":42,"column":48},"end":{"line":42,"column":59}},{"start":{"line":42,"column":62},"end":{"line":42,"column":76}}],"line":42},"8":{"loc":{"start":{"line":43,"column":22},"end":{"line":43,"column":80}},"type":"binary-expr","locations":[{"start":{"line":43,"column":22},"end":{"line":43,"column":25}},{"start":{"line":43,"column":30},"end":{"line":43,"column":79}}],"line":43},"9":{"loc":{"start":{"line":43,"column":30},"end":{"line":43,"column":79}},"type":"cond-expr","locations":[{"start":{"line":43,"column":47},"end":{"line":43,"column":72}},{"start":{"line":43,"column":75},"end":{"line":43,"column":79}}],"line":43},"10":{"loc":{"start":{"line":44,"column":27},"end":{"line":44,"column":40}},"type":"cond-expr","locations":[{"start":{"line":44,"column":35},"end":{"line":44,"column":36}},{"start":{"line":44,"column":39},"end":{"line":44,"column":40}}],"line":44},"11":{"loc":{"start":{"line":45,"column":27},"end":{"line":45,"column":40}},"type":"cond-expr","locations":[{"start":{"line":45,"column":35},"end":{"line":45,"column":36}},{"start":{"line":45,"column":39},"end":{"line":45,"column":40}}],"line":45}},"s":{"0":24,"1":24,"2":24,"3":24,"4":0,"5":24,"6":24,"7":24,"8":24,"9":24,"10":64,"11":0,"12":24,"13":64,"14":0,"15":64,"16":64,"17":1,"18":1,"19":1,"20":1,"21":8,"22":8,"23":8,"24":8,"25":8,"26":8,"27":8,"28":8,"29":8,"30":8,"31":8,"32":8,"33":8,"34":8,"35":24,"36":24,"37":18,"38":18,"39":18,"40":18,"41":18,"42":18,"43":8,"44":6,"45":1},"f":{"0":24,"1":0,"2":24,"3":64,"4":0,"5":64,"6":8,"7":24,"8":24,"9":18,"10":6},"b":{"0":[24,0],"1":[24,24],"2":[24,0],"3":[24,0],"4":[0,0],"5":[0,64],"6":[8,8,8],"7":[6,12],"8":[18,12],"9":[6,6],"10":[12,6],"11":[12,6]},"inputSourceMap":{"version":3,"sources":["sendADM.js"],"names":["adm","require","ADM_METHOD","sendADM","regIds","_data","settings","resumed","method","success","failure","message","promises","admSender","Sender","data","consolidationKey","expiry","timeToLive","custom","expiresAfter","Math","floor","Date","now","forEach","regId","push","Promise","resolve","send","err","response","errorMsg","Error","error","all","then","module","exports"],"mappings":";;;;;;;;AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,UAAD,CAAnB;;AACA,iBAAuBA,OAAO,CAAC,aAAD,CAA9B;AAAA,MAAQC,UAAR,YAAQA,UAAR;;AAEA,MAAMC,OAAO,GAAG,CAACC,MAAD,EAASC,KAAT,EAAgBC,QAAhB,KAA6B;AAC3C,QAAMC,OAAO,GAAG;AACdC,IAAAA,MAAM,EAAEN,UADM;AAEdO,IAAAA,OAAO,EAAE,CAFK;AAGdC,IAAAA,OAAO,EAAE,CAHK;AAIdC,IAAAA,OAAO,EAAE;AAJK,GAAhB;AAMA,QAAMC,QAAQ,GAAG,EAAjB;AACA,QAAMC,SAAS,GAAG,IAAIb,GAAG,CAACc,MAAR,CAAeR,QAAQ,CAACN,GAAxB,CAAlB;;AACA,QAAMe,IAAI,qBAAQV,KAAR,CAAV;;AACA,QAAQW,gBAAR,GAAyDD,IAAzD,CAAQC,gBAAR;AAAA,QAA0BC,MAA1B,GAAyDF,IAAzD,CAA0BE,MAA1B;AAAA,QAAkCC,UAAlC,GAAyDH,IAAzD,CAAkCG,UAAlC;AAAA,QAA8CC,MAA9C,GAAyDJ,IAAzD,CAA8CI,MAA9C;AAEA,SAAOJ,IAAI,CAACC,gBAAZ;AACA,SAAOD,IAAI,CAACE,MAAZ;AACA,SAAOF,IAAI,CAACG,UAAZ;AACA,SAAOH,IAAI,CAACI,MAAZ;AAEA,QAAMR,OAAO,GAAG;AACdS,IAAAA,YAAY,EACVH,MAAM,GAAGI,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACC,GAAL,KAAa,IAAxB,CAAT,IAA0CN,UAA1C,IAAwD,KAAK,KAFjD;AAGdF,IAAAA,gBAHc;AAIdD,IAAAA,IAAI,kCAAOA,IAAP,GAAgBI,MAAhB;AAJU,GAAhB;AAOAf,EAAAA,MAAM,CAACqB,OAAP,CAAgBC,KAAD,IAAW;AACxBd,IAAAA,QAAQ,CAACe,IAAT,CACE,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AACvBhB,MAAAA,SAAS,CAACiB,IAAV,CAAenB,OAAf,EAAwBe,KAAxB,EAA+B,CAACK,GAAD,EAAMC,QAAN,KAAmB;AAChD,cAAMC,QAAQ,GAAGF,GAAG,YAAYG,KAAf,GAAuBH,GAAG,CAACpB,OAA3B,GAAqCqB,QAAQ,CAACG,KAA/D;AACA,cAAMA,KAAK,GACTJ,GAAG,KAAKC,QAAQ,CAACG,KAAT,GAAiB,IAAID,KAAJ,CAAUF,QAAQ,CAACG,KAAnB,CAAjB,GAA6C,IAAlD,CADL;AAEA5B,QAAAA,OAAO,CAACE,OAAR,IAAmB0B,KAAK,GAAG,CAAH,GAAO,CAA/B;AACA5B,QAAAA,OAAO,CAACG,OAAR,IAAmByB,KAAK,GAAG,CAAH,GAAO,CAA/B;AACA5B,QAAAA,OAAO,CAACI,OAAR,CAAgBgB,IAAhB,CAAqB;AACnBD,UAAAA,KADmB;AAEnBS,UAAAA,KAFmB;AAGnBF,UAAAA;AAHmB,SAArB;AAKAJ,QAAAA,OAAO;AACR,OAZD;AAaD,KAdD,CADF;AAiBD,GAlBD;AAoBA,SAAOD,OAAO,CAACQ,GAAR,CAAYxB,QAAZ,EAAsByB,IAAtB,CAA2B,MAAM9B,OAAjC,CAAP;AACD,CA7CD;;AA+CA+B,MAAM,CAACC,OAAP,GAAiBpC,OAAjB","sourceRoot":"/Volumes/projectes/node-pushnotifications/src/","sourcesContent":["const adm = require('node-adm');\nconst { ADM_METHOD } = require('./constants');\n\nconst sendADM = (regIds, _data, settings) => {\n  const resumed = {\n    method: ADM_METHOD,\n    success: 0,\n    failure: 0,\n    message: [],\n  };\n  const promises = [];\n  const admSender = new adm.Sender(settings.adm);\n  const data = { ..._data };\n  const { consolidationKey, expiry, timeToLive, custom } = data;\n\n  delete data.consolidationKey;\n  delete data.expiry;\n  delete data.timeToLive;\n  delete data.custom;\n\n  const message = {\n    expiresAfter:\n      expiry - Math.floor(Date.now() / 1000) || timeToLive || 28 * 86400,\n    consolidationKey,\n    data: { ...data, ...custom },\n  };\n\n  regIds.forEach((regId) => {\n    promises.push(\n      new Promise((resolve) => {\n        admSender.send(message, regId, (err, response) => {\n          const errorMsg = err instanceof Error ? err.message : response.error;\n          const error =\n            err || (response.error ? new Error(response.error) : null);\n          resumed.success += error ? 0 : 1;\n          resumed.failure += error ? 1 : 0;\n          resumed.message.push({\n            regId,\n            error,\n            errorMsg,\n          });\n          resolve();\n        });\n      })\n    );\n  });\n\n  return Promise.all(promises).then(() => resumed);\n};\n\nmodule.exports = sendADM;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"77a83a671ba3559232d666b74d99bfa814a68ec3","contentHash":"ee3caf4f94e40021f8849bbde5d99c995f7b49196681aca8aad2b352b83ce689"},"/Volumes/projectes/node-pushnotifications/src/sendWNS.js":{"path":"/Volumes/projectes/node-pushnotifications/src/sendWNS.js","statementMap":{"0":{"start":{"line":3,"column":54},"end":{"line":3,"column":73}},"1":{"start":{"line":3,"column":75},"end":{"line":3,"column":326}},"2":{"start":{"line":3,"column":125},"end":{"line":3,"column":161}},"3":{"start":{"line":3,"column":163},"end":{"line":3,"column":324}},"4":{"start":{"line":3,"column":224},"end":{"line":3,"column":287}},"5":{"start":{"line":3,"column":327},"end":{"line":3,"column":339}},"6":{"start":{"line":5,"column":33},"end":{"line":5,"column":489}},"7":{"start":{"line":5,"column":46},"end":{"line":5,"column":47}},"8":{"start":{"line":5,"column":91},"end":{"line":5,"column":131}},"9":{"start":{"line":5,"column":133},"end":{"line":5,"column":487}},"10":{"start":{"line":5,"column":194},"end":{"line":5,"column":236}},"11":{"start":{"line":5,"column":402},"end":{"line":5,"column":483}},"12":{"start":{"line":5,"column":490},"end":{"line":5,"column":504}},"13":{"start":{"line":7,"column":44},"end":{"line":7,"column":195}},"14":{"start":{"line":7,"column":62},"end":{"line":7,"column":166}},"15":{"start":{"line":7,"column":176},"end":{"line":7,"column":193}},"16":{"start":{"line":7,"column":196},"end":{"line":7,"column":207}},"17":{"start":{"line":9,"column":12},"end":{"line":9,"column":26}},"18":{"start":{"line":11,"column":17},"end":{"line":11,"column":39}},"19":{"start":{"line":12,"column":19},"end":{"line":12,"column":38}},"20":{"start":{"line":14,"column":26},"end":{"line":14,"column":73}},"21":{"start":{"line":14,"column":33},"end":{"line":14,"column":73}},"22":{"start":{"line":16,"column":19},"end":{"line":26,"column":1}},"23":{"start":{"line":17,"column":2},"end":{"line":19,"column":3}},"24":{"start":{"line":18,"column":4},"end":{"line":18,"column":15}},"25":{"start":{"line":21,"column":2},"end":{"line":23,"column":3}},"26":{"start":{"line":22,"column":4},"end":{"line":22,"column":26}},"27":{"start":{"line":25,"column":2},"end":{"line":25,"column":14}},"28":{"start":{"line":31,"column":16},"end":{"line":31,"column":66}},"29":{"start":{"line":32,"column":19},"end":{"line":32,"column":83}},"30":{"start":{"line":33,"column":2},"end":{"line":33,"column":35}},"31":{"start":{"line":34,"column":2},"end":{"line":34,"column":35}},"32":{"start":{"line":35,"column":2},"end":{"line":39,"column":5}},"33":{"start":{"line":42,"column":16},"end":{"line":106,"column":1}},"34":{"start":{"line":48,"column":18},"end":{"line":48,"column":32}},"35":{"start":{"line":50,"column":4},"end":{"line":65,"column":5}},"36":{"start":{"line":51,"column":6},"end":{"line":62,"column":7}},"37":{"start":{"line":52,"column":8},"end":{"line":58,"column":11}},"38":{"start":{"line":53,"column":10},"end":{"line":53,"column":47}},"39":{"start":{"line":54,"column":10},"end":{"line":54,"column":48}},"40":{"start":{"line":55,"column":10},"end":{"line":57,"column":24}},"41":{"start":{"line":60,"column":8},"end":{"line":60,"column":47}},"42":{"start":{"line":61,"column":8},"end":{"line":61,"column":76}},"43":{"start":{"line":64,"column":6},"end":{"line":64,"column":65}},"44":{"start":{"line":64,"column":43},"end":{"line":64,"column":53}},"45":{"start":{"line":68,"column":19},"end":{"line":68,"column":21}},"46":{"start":{"line":70,"column":15},"end":{"line":70,"column":46}},"47":{"start":{"line":72,"column":29},"end":{"line":72,"column":52}},"48":{"start":{"line":73,"column":15},"end":{"line":73,"column":98}},"49":{"start":{"line":74,"column":2},"end":{"line":79,"column":4}},"50":{"start":{"line":80,"column":2},"end":{"line":80,"column":46}},"51":{"start":{"line":81,"column":2},"end":{"line":81,"column":43}},"52":{"start":{"line":82,"column":2},"end":{"line":82,"column":49}},"53":{"start":{"line":83,"column":2},"end":{"line":83,"column":33}},"54":{"start":{"line":84,"column":2},"end":{"line":84,"column":22}},"55":{"start":{"line":85,"column":2},"end":{"line":85,"column":21}},"56":{"start":{"line":86,"column":2},"end":{"line":86,"column":23}},"57":{"start":{"line":88,"column":2},"end":{"line":103,"column":3}},"58":{"start":{"line":89,"column":4},"end":{"line":89,"column":22}},"59":{"start":{"line":90,"column":19},"end":{"line":90,"column":31}},"60":{"start":{"line":92,"column":4},"end":{"line":94,"column":8}},"61":{"start":{"line":93,"column":6},"end":{"line":93,"column":102}},"62":{"start":{"line":93,"column":71},"end":{"line":93,"column":100}},"63":{"start":{"line":97,"column":4},"end":{"line":102,"column":9}},"64":{"start":{"line":97,"column":29},"end":{"line":102,"column":7}},"65":{"start":{"line":98,"column":6},"end":{"line":101,"column":9}},"66":{"start":{"line":99,"column":8},"end":{"line":99,"column":46}},"67":{"start":{"line":100,"column":8},"end":{"line":100,"column":18}},"68":{"start":{"line":105,"column":2},"end":{"line":105,"column":51}},"69":{"start":{"line":105,"column":42},"end":{"line":105,"column":49}},"70":{"start":{"line":108,"column":0},"end":{"line":108,"column":25}}},"fnMap":{"0":{"name":"ownKeys","decl":{"start":{"line":3,"column":9},"end":{"line":3,"column":16}},"loc":{"start":{"line":3,"column":41},"end":{"line":3,"column":341}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":3,"column":207},"end":{"line":3,"column":208}},"loc":{"start":{"line":3,"column":222},"end":{"line":3,"column":289}},"line":3},"2":{"name":"_objectSpread","decl":{"start":{"line":5,"column":9},"end":{"line":5,"column":22}},"loc":{"start":{"line":5,"column":31},"end":{"line":5,"column":506}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":5,"column":177},"end":{"line":5,"column":178}},"loc":{"start":{"line":5,"column":192},"end":{"line":5,"column":238}},"line":5},"4":{"name":"(anonymous_4)","decl":{"start":{"line":5,"column":385},"end":{"line":5,"column":386}},"loc":{"start":{"line":5,"column":400},"end":{"line":5,"column":485}},"line":5},"5":{"name":"_defineProperty","decl":{"start":{"line":7,"column":9},"end":{"line":7,"column":24}},"loc":{"start":{"line":7,"column":42},"end":{"line":7,"column":209}},"line":7},"6":{"name":"(anonymous_6)","decl":{"start":{"line":14,"column":26},"end":{"line":14,"column":27}},"loc":{"start":{"line":14,"column":33},"end":{"line":14,"column":73}},"line":14},"7":{"name":"(anonymous_7)","decl":{"start":{"line":16,"column":19},"end":{"line":16,"column":20}},"loc":{"start":{"line":16,"column":26},"end":{"line":26,"column":1}},"line":16},"8":{"name":"processResponse","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":24}},"loc":{"start":{"line":30,"column":47},"end":{"line":40,"column":1}},"line":30},"9":{"name":"(anonymous_9)","decl":{"start":{"line":42,"column":16},"end":{"line":42,"column":17}},"loc":{"start":{"line":42,"column":46},"end":{"line":106,"column":1}},"line":42},"10":{"name":"sendNotifications","decl":{"start":{"line":47,"column":11},"end":{"line":47,"column":28}},"loc":{"start":{"line":47,"column":79},"end":{"line":66,"column":3}},"line":47},"11":{"name":"(anonymous_11)","decl":{"start":{"line":52,"column":51},"end":{"line":52,"column":52}},"loc":{"start":{"line":52,"column":70},"end":{"line":58,"column":9}},"line":52},"12":{"name":"(anonymous_12)","decl":{"start":{"line":64,"column":37},"end":{"line":64,"column":38}},"loc":{"start":{"line":64,"column":43},"end":{"line":64,"column":53}},"line":64},"13":{"name":"(anonymous_13)","decl":{"start":{"line":92,"column":30},"end":{"line":92,"column":31}},"loc":{"start":{"line":92,"column":51},"end":{"line":94,"column":5}},"line":92},"14":{"name":"(anonymous_14)","decl":{"start":{"line":93,"column":64},"end":{"line":93,"column":65}},"loc":{"start":{"line":93,"column":71},"end":{"line":93,"column":100}},"line":93},"15":{"name":"(anonymous_15)","decl":{"start":{"line":97,"column":20},"end":{"line":97,"column":21}},"loc":{"start":{"line":97,"column":29},"end":{"line":102,"column":7}},"line":97},"16":{"name":"(anonymous_16)","decl":{"start":{"line":97,"column":55},"end":{"line":97,"column":56}},"loc":{"start":{"line":97,"column":66},"end":{"line":102,"column":5}},"line":97},"17":{"name":"(anonymous_17)","decl":{"start":{"line":98,"column":49},"end":{"line":98,"column":50}},"loc":{"start":{"line":98,"column":68},"end":{"line":101,"column":7}},"line":98},"18":{"name":"(anonymous_18)","decl":{"start":{"line":105,"column":36},"end":{"line":105,"column":37}},"loc":{"start":{"line":105,"column":42},"end":{"line":105,"column":49}},"line":105}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":75},"end":{"line":3,"column":326}},"type":"if","locations":[{"start":{"line":3,"column":75},"end":{"line":3,"column":326}},{"start":{"line":3,"column":75},"end":{"line":3,"column":326}}],"line":3},"1":{"loc":{"start":{"line":3,"column":163},"end":{"line":3,"column":291}},"type":"binary-expr","locations":[{"start":{"line":3,"column":163},"end":{"line":3,"column":177}},{"start":{"line":3,"column":182},"end":{"line":3,"column":290}}],"line":3},"2":{"loc":{"start":{"line":5,"column":91},"end":{"line":5,"column":131}},"type":"cond-expr","locations":[{"start":{"line":5,"column":114},"end":{"line":5,"column":126}},{"start":{"line":5,"column":129},"end":{"line":5,"column":131}}],"line":5},"3":{"loc":{"start":{"line":5,"column":133},"end":{"line":5,"column":486}},"type":"cond-expr","locations":[{"start":{"line":5,"column":141},"end":{"line":5,"column":239}},{"start":{"line":5,"column":242},"end":{"line":5,"column":486}}],"line":5},"4":{"loc":{"start":{"line":5,"column":242},"end":{"line":5,"column":486}},"type":"cond-expr","locations":[{"start":{"line":5,"column":277},"end":{"line":5,"column":350}},{"start":{"line":5,"column":353},"end":{"line":5,"column":486}}],"line":5},"5":{"loc":{"start":{"line":7,"column":44},"end":{"line":7,"column":195}},"type":"if","locations":[{"start":{"line":7,"column":44},"end":{"line":7,"column":195}},{"start":{"line":7,"column":44},"end":{"line":7,"column":195}}],"line":7},"6":{"loc":{"start":{"line":14,"column":33},"end":{"line":14,"column":73}},"type":"cond-expr","locations":[{"start":{"line":14,"column":56},"end":{"line":14,"column":67}},{"start":{"line":14,"column":70},"end":{"line":14,"column":73}}],"line":14},"7":{"loc":{"start":{"line":17,"column":2},"end":{"line":19,"column":3}},"type":"if","locations":[{"start":{"line":17,"column":2},"end":{"line":19,"column":3}},{"start":{"line":17,"column":2},"end":{"line":19,"column":3}}],"line":17},"8":{"loc":{"start":{"line":21,"column":2},"end":{"line":23,"column":3}},"type":"if","locations":[{"start":{"line":21,"column":2},"end":{"line":23,"column":3}},{"start":{"line":21,"column":2},"end":{"line":23,"column":3}}],"line":21},"9":{"loc":{"start":{"line":31,"column":16},"end":{"line":31,"column":66}},"type":"binary-expr","locations":[{"start":{"line":31,"column":16},"end":{"line":31,"column":31}},{"start":{"line":31,"column":35},"end":{"line":31,"column":66}}],"line":31},"10":{"loc":{"start":{"line":32,"column":19},"end":{"line":32,"column":83}},"type":"binary-expr","locations":[{"start":{"line":32,"column":19},"end":{"line":32,"column":41}},{"start":{"line":32,"column":45},"end":{"line":32,"column":83}}],"line":32},"11":{"loc":{"start":{"line":33,"column":21},"end":{"line":33,"column":34}},"type":"cond-expr","locations":[{"start":{"line":33,"column":29},"end":{"line":33,"column":30}},{"start":{"line":33,"column":33},"end":{"line":33,"column":34}}],"line":33},"12":{"loc":{"start":{"line":34,"column":21},"end":{"line":34,"column":34}},"type":"cond-expr","locations":[{"start":{"line":34,"column":29},"end":{"line":34,"column":30}},{"start":{"line":34,"column":33},"end":{"line":34,"column":34}}],"line":34},"13":{"loc":{"start":{"line":50,"column":4},"end":{"line":65,"column":5}},"type":"if","locations":[{"start":{"line":50,"column":4},"end":{"line":65,"column":5}},{"start":{"line":50,"column":4},"end":{"line":65,"column":5}}],"line":50},"14":{"loc":{"start":{"line":73,"column":15},"end":{"line":73,"column":98}},"type":"cond-expr","locations":[{"start":{"line":73,"column":50},"end":{"line":73,"column":71}},{"start":{"line":73,"column":74},"end":{"line":73,"column":98}}],"line":73},"15":{"loc":{"start":{"line":80,"column":17},"end":{"line":80,"column":45}},"type":"binary-expr","locations":[{"start":{"line":80,"column":17},"end":{"line":80,"column":29}},{"start":{"line":80,"column":33},"end":{"line":80,"column":45}}],"line":80},"16":{"loc":{"start":{"line":81,"column":16},"end":{"line":81,"column":42}},"type":"binary-expr","locations":[{"start":{"line":81,"column":16},"end":{"line":81,"column":27}},{"start":{"line":81,"column":31},"end":{"line":81,"column":42}}],"line":81},"17":{"loc":{"start":{"line":82,"column":18},"end":{"line":82,"column":48}},"type":"binary-expr","locations":[{"start":{"line":82,"column":18},"end":{"line":82,"column":31}},{"start":{"line":82,"column":35},"end":{"line":82,"column":48}}],"line":82},"18":{"loc":{"start":{"line":88,"column":2},"end":{"line":103,"column":3}},"type":"if","locations":[{"start":{"line":88,"column":2},"end":{"line":103,"column":3}},{"start":{"line":88,"column":2},"end":{"line":103,"column":3}}],"line":88},"19":{"loc":{"start":{"line":93,"column":71},"end":{"line":93,"column":100}},"type":"cond-expr","locations":[{"start":{"line":93,"column":77},"end":{"line":93,"column":88}},{"start":{"line":93,"column":91},"end":{"line":93,"column":100}}],"line":93}},"s":{"0":53,"1":53,"2":53,"3":53,"4":0,"5":53,"6":53,"7":53,"8":65,"9":65,"10":161,"11":0,"12":53,"13":161,"14":0,"15":161,"16":161,"17":1,"18":1,"19":1,"20":1,"21":60,"22":1,"23":60,"24":6,"25":54,"26":12,"27":42,"28":33,"29":33,"30":33,"31":33,"32":33,"33":1,"34":24,"35":24,"36":18,"37":18,"38":12,"39":12,"40":12,"41":6,"42":6,"43":6,"44":4,"45":15,"46":15,"47":15,"48":15,"49":15,"50":15,"51":15,"52":15,"53":15,"54":15,"55":15,"56":15,"57":15,"58":6,"59":6,"60":6,"61":6,"62":6,"63":9,"64":27,"65":27,"66":21,"67":21,"68":15,"69":11,"70":1},"f":{"0":53,"1":0,"2":53,"3":161,"4":0,"5":161,"6":60,"7":60,"8":33,"9":15,"10":24,"11":12,"12":4,"13":6,"14":6,"15":27,"16":27,"17":21,"18":11},"b":{"0":[53,0],"1":[53,53],"2":[65,0],"3":[53,12],"4":[12,0],"5":[0,161],"6":[6,54],"7":[6,54],"8":[12,42],"9":[33,27],"10":[33,27],"11":[18,15],"12":[18,15],"13":[18,6],"14":[1,14],"15":[15,15],"16":[15,15],"17":[15,15],"18":[6,9],"19":[2,4]},"inputSourceMap":{"version":3,"sources":["sendWNS.js"],"names":["wns","require","WNS_METHOD","parseErrorMessage","err","Error","message","parseError","resumed","processResponse","response","regId","error","innerError","errorMsg","success","failure","push","sendWNS","_regIds","_data","settings","sendPromises","sendNotifications","regIds","notificationMethod","data","opts","onFinish","shift","Promise","resolve","accessToken","newAccessToken","reject","all","then","promises","JSON","stringify","method","headers","launch","duration","forEach","module","exports"],"mappings":"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","sourceRoot":"/Volumes/projectes/node-pushnotifications/src/","sourcesContent":["const wns = require('wns');\nconst { WNS_METHOD } = require('./constants');\n\nconst parseErrorMessage = (err) => (err instanceof Error ? err.message : err);\nconst parseError = (err) => {\n  if (err instanceof Error) {\n    return err;\n  }\n  if (err) {\n    return new Error(err);\n  }\n  return null;\n};\n\nlet resumed;\n\nfunction processResponse(err, response, regId) {\n  const error = parseError(err) || parseError(response.innerError);\n  const errorMsg =\n    parseErrorMessage(err) || parseErrorMessage(response.innerError);\n  resumed.success += error ? 0 : 1;\n  resumed.failure += error ? 1 : 0;\n  resumed.message.push({\n    regId,\n    error,\n    errorMsg,\n  });\n}\n\nconst sendWNS = (_regIds, _data, settings) => {\n  // sendNotifications and sendPromises are inside exports as in this way,\n  // successive calls to this module doesn't override previous ones\n  let sendPromises;\n\n  function sendNotifications(regIds, notificationMethod, data, opts, onFinish) {\n    const regId = regIds.shift();\n    if (regId) {\n      try {\n        wns[notificationMethod](regId, data, opts, (err, response) => {\n          sendPromises.push(Promise.resolve());\n          processResponse(err, response, regId);\n          sendNotifications(\n            regIds,\n            notificationMethod,\n            data,\n            { ...opts, accessToken: response.newAccessToken },\n            onFinish\n          );\n        });\n      } catch (err) {\n        sendPromises.push(Promise.reject(err));\n        sendNotifications(regIds, notificationMethod, data, opts, onFinish);\n      }\n    } else {\n      Promise.all(sendPromises).then(() => onFinish(), onFinish);\n    }\n  }\n\n  const promises = [];\n  const opts = { ...settings.wns };\n  const { notificationMethod } = opts;\n  const data =\n    notificationMethod === 'sendRaw' ? JSON.stringify(_data) : { ..._data };\n\n  resumed = {\n    method: WNS_METHOD,\n    success: 0,\n    failure: 0,\n    message: [],\n  };\n  opts.headers = data.headers || opts.headers;\n  opts.launch = data.launch || opts.launch;\n  opts.duration = data.duration || opts.duration;\n\n  delete opts.notificationMethod;\n  delete data.headers;\n  delete data.launch;\n  delete data.duration;\n\n  if (opts.accessToken) {\n    sendPromises = [];\n    const regIds = [..._regIds];\n    // eslint-disable-next-line max-len\n    promises.push(\n      new Promise((resolve, reject) => {\n        sendNotifications(regIds, notificationMethod, data, opts, (err) =>\n          err ? reject(err) : resolve()\n        );\n      })\n    );\n  } else {\n    // eslint-disable-next-line max-len\n    _regIds.forEach((regId) =>\n      promises.push(\n        new Promise((resolve) => {\n          wns[notificationMethod](regId, data, opts, (err, response) => {\n            processResponse(err, response, regId);\n            resolve();\n          });\n        })\n      )\n    );\n  }\n\n  return Promise.all(promises).then(() => resumed);\n};\n\nmodule.exports = sendWNS;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"42701eeece294a6ab8e730436e2b5f6f808ade5b","contentHash":"e79262ab3f2d093b8cebffc28f8a42c2069886d068ed94ae1cb8ef1b16d2bb45"},"/Volumes/projectes/node-pushnotifications/src/sendWeb.js":{"path":"/Volumes/projectes/node-pushnotifications/src/sendWeb.js","statementMap":{"0":{"start":{"line":3,"column":77},"end":{"line":3,"column":175}},"1":{"start":{"line":3,"column":94},"end":{"line":3,"column":107}},"2":{"start":{"line":3,"column":121},"end":{"line":3,"column":131}},"3":{"start":{"line":3,"column":151},"end":{"line":3,"column":165}},"4":{"start":{"line":3,"column":166},"end":{"line":3,"column":173}},"5":{"start":{"line":3,"column":176},"end":{"line":3,"column":263}},"6":{"start":{"line":3,"column":193},"end":{"line":3,"column":208}},"7":{"start":{"line":3,"column":218},"end":{"line":3,"column":261}},"8":{"start":{"line":5,"column":33},"end":{"line":5,"column":387}},"9":{"start":{"line":5,"column":65},"end":{"line":5,"column":69}},"10":{"start":{"line":5,"column":78},"end":{"line":5,"column":87}},"11":{"start":{"line":5,"column":89},"end":{"line":5,"column":384}},"12":{"start":{"line":5,"column":147},"end":{"line":5,"column":167}},"13":{"start":{"line":5,"column":193},"end":{"line":5,"column":264}},"14":{"start":{"line":5,"column":290},"end":{"line":5,"column":360}},"15":{"start":{"line":5,"column":363},"end":{"line":5,"column":380}},"16":{"start":{"line":7,"column":16},"end":{"line":7,"column":35}},"17":{"start":{"line":9,"column":17},"end":{"line":9,"column":33}},"18":{"start":{"line":10,"column":11},"end":{"line":10,"column":22}},"19":{"start":{"line":11,"column":15},"end":{"line":11,"column":30}},"20":{"start":{"line":12,"column":14},"end":{"line":12,"column":28}},"21":{"start":{"line":14,"column":18},"end":{"line":14,"column":40}},"22":{"start":{"line":15,"column":19},"end":{"line":15,"column":39}},"23":{"start":{"line":17,"column":18},"end":{"line":17,"column":52}},"24":{"start":{"line":19,"column":33},"end":{"line":50,"column":3}},"25":{"start":{"line":20,"column":13},"end":{"line":45,"column":4}},"26":{"start":{"line":21,"column":20},"end":{"line":21,"column":35}},"27":{"start":{"line":22,"column":21},"end":{"line":37,"column":8}},"28":{"start":{"line":22,"column":41},"end":{"line":37,"column":7}},"29":{"start":{"line":22,"column":108},"end":{"line":29,"column":5}},"30":{"start":{"line":29,"column":22},"end":{"line":37,"column":5}},"31":{"start":{"line":38,"column":20},"end":{"line":38,"column":47}},"32":{"start":{"line":39,"column":20},"end":{"line":43,"column":7}},"33":{"start":{"line":39,"column":54},"end":{"line":43,"column":5}},"34":{"start":{"line":44,"column":4},"end":{"line":44,"column":48}},"35":{"start":{"line":47,"column":2},"end":{"line":49,"column":4}},"36":{"start":{"line":48,"column":4},"end":{"line":48,"column":39}},"37":{"start":{"line":52,"column":0},"end":{"line":52,"column":29}}},"fnMap":{"0":{"name":"asyncGeneratorStep","decl":{"start":{"line":3,"column":9},"end":{"line":3,"column":27}},"loc":{"start":{"line":3,"column":75},"end":{"line":3,"column":265}},"line":3},"1":{"name":"_asyncToGenerator","decl":{"start":{"line":5,"column":9},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":31},"end":{"line":5,"column":389}},"line":5},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":40},"end":{"line":5,"column":41}},"loc":{"start":{"line":5,"column":52},"end":{"line":5,"column":386}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":5,"column":108},"end":{"line":5,"column":109}},"loc":{"start":{"line":5,"column":135},"end":{"line":5,"column":382}},"line":5},"4":{"name":"_next","decl":{"start":{"line":5,"column":178},"end":{"line":5,"column":183}},"loc":{"start":{"line":5,"column":191},"end":{"line":5,"column":266}},"line":5},"5":{"name":"_throw","decl":{"start":{"line":5,"column":276},"end":{"line":5,"column":282}},"loc":{"start":{"line":5,"column":288},"end":{"line":5,"column":362}},"line":5},"6":{"name":"(anonymous_6)","decl":{"start":{"line":19,"column":33},"end":{"line":19,"column":34}},"loc":{"start":{"line":19,"column":45},"end":{"line":50,"column":1}},"line":19},"7":{"name":"(anonymous_7)","decl":{"start":{"line":20,"column":31},"end":{"line":20,"column":32}},"loc":{"start":{"line":20,"column":66},"end":{"line":45,"column":3}},"line":20},"8":{"name":"(anonymous_8)","decl":{"start":{"line":22,"column":32},"end":{"line":22,"column":33}},"loc":{"start":{"line":22,"column":41},"end":{"line":37,"column":7}},"line":22},"9":{"name":"(anonymous_9)","decl":{"start":{"line":22,"column":101},"end":{"line":22,"column":102}},"loc":{"start":{"line":22,"column":108},"end":{"line":29,"column":5}},"line":22},"10":{"name":"(anonymous_10)","decl":{"start":{"line":29,"column":14},"end":{"line":29,"column":15}},"loc":{"start":{"line":29,"column":22},"end":{"line":37,"column":5}},"line":29},"11":{"name":"(anonymous_11)","decl":{"start":{"line":39,"column":35},"end":{"line":39,"column":36}},"loc":{"start":{"line":39,"column":54},"end":{"line":43,"column":5}},"line":39},"12":{"name":"sendWebPush","decl":{"start":{"line":47,"column":18},"end":{"line":47,"column":29}},"loc":{"start":{"line":47,"column":44},"end":{"line":49,"column":3}},"line":47}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":176},"end":{"line":3,"column":263}},"type":"if","locations":[{"start":{"line":3,"column":176},"end":{"line":3,"column":263}},{"start":{"line":3,"column":176},"end":{"line":3,"column":263}}],"line":3}},"s":{"0":14,"1":14,"2":12,"3":2,"4":2,"5":12,"6":6,"7":6,"8":1,"9":8,"10":8,"11":8,"12":8,"13":14,"14":0,"15":8,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":8,"27":8,"28":14,"29":8,"30":4,"31":6,"32":6,"33":6,"34":6,"35":1,"36":8,"37":1},"f":{"0":14,"1":1,"2":8,"3":8,"4":14,"5":0,"6":1,"7":8,"8":14,"9":8,"10":4,"11":6,"12":8},"b":{"0":[6,6]},"inputSourceMap":{"version":3,"sources":["sendWeb.js"],"names":["webPush","require","is","unless","assoc","WEB_METHOD","stringify","String","JSON","sendWebPush","regIds","data","settings","payload","promises","map","regId","sendNotification","web","then","success","failure","message","error","catch","err","errorMsg","results","Promise","all","reduced","reduce","acc","current","module","exports"],"mappings":";;;;;;AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,UAAD,CAAvB;;AACA,iBAA8BA,OAAO,CAAC,OAAD,CAArC;AAAA,MAAQC,EAAR,YAAQA,EAAR;AAAA,MAAYC,MAAZ,YAAYA,MAAZ;AAAA,MAAoBC,KAApB,YAAoBA,KAApB;;AACA,kBAAuBH,OAAO,CAAC,aAAD,CAA9B;AAAA,MAAQI,UAAR,aAAQA,UAAR;;AAEA,MAAMC,SAAS,GAAGH,MAAM,CAACD,EAAE,CAACK,MAAD,CAAH,EAAaC,IAAI,CAACF,SAAlB,CAAxB;;AAEA,MAAMG,WAAW;AAAA,+BAAG,WAAOC,MAAP,EAAeC,IAAf,EAAqBC,QAArB,EAAkC;AACpD,UAAMC,OAAO,GAAGP,SAAS,CAACK,IAAD,CAAzB;AACA,UAAMG,QAAQ,GAAGJ,MAAM,CAACK,GAAP,CAAYC,KAAD,IAC1BhB,OAAO,CACJiB,gBADH,CACoBD,KADpB,EAC2BH,OAD3B,EACoCD,QAAQ,CAACM,GAD7C,EAEGC,IAFH,CAEQ,OAAO;AACXC,MAAAA,OAAO,EAAE,CADE;AAEXC,MAAAA,OAAO,EAAE,CAFE;AAGXC,MAAAA,OAAO,EAAE,CACP;AACEN,QAAAA,KADF;AAEEO,QAAAA,KAAK,EAAE;AAFT,OADO;AAHE,KAAP,CAFR,EAYGC,KAZH,CAYUC,GAAD,KAAU;AACfL,MAAAA,OAAO,EAAE,CADM;AAEfC,MAAAA,OAAO,EAAE,CAFM;AAGfC,MAAAA,OAAO,EAAE,CACP;AACEN,QAAAA,KADF;AAEEO,QAAAA,KAAK,EAAEE,GAFT;AAGEC,QAAAA,QAAQ,EAAED,GAAG,CAACH;AAHhB,OADO;AAHM,KAAV,CAZT,CADe,CAAjB;AA0BA,UAAMK,OAAO,SAASC,OAAO,CAACC,GAAR,CAAYf,QAAZ,CAAtB;AAEA,UAAMgB,OAAO,GAAGH,OAAO,CAACI,MAAR,CAAe,CAACC,GAAD,EAAMC,OAAN,MAAmB;AAChDb,MAAAA,OAAO,EAAEY,GAAG,CAACZ,OAAJ,GAAca,OAAO,CAACb,OADiB;AAEhDC,MAAAA,OAAO,EAAEW,GAAG,CAACX,OAAJ,GAAcY,OAAO,CAACZ,OAFiB;AAGhDC,MAAAA,OAAO,EAAE,CAAC,GAAGU,GAAG,CAACV,OAAR,EAAiB,GAAGW,OAAO,CAACX,OAA5B;AAHuC,KAAnB,CAAf,CAAhB;AAKA,WAAOlB,KAAK,CAAC,QAAD,EAAWC,UAAX,EAAuByB,OAAvB,CAAZ;AACD,GApCgB;;AAAA,kBAAXrB,WAAW;AAAA;AAAA;AAAA,GAAjB;;AAsCAyB,MAAM,CAACC,OAAP,GAAiB1B,WAAjB","sourceRoot":"/Volumes/projectes/node-pushnotifications/src/","sourcesContent":["const webPush = require('web-push');\nconst { is, unless, assoc } = require('ramda');\nconst { WEB_METHOD } = require('./constants');\n\nconst stringify = unless(is(String), JSON.stringify);\n\nconst sendWebPush = async (regIds, data, settings) => {\n  const payload = stringify(data);\n  const promises = regIds.map((regId) =>\n    webPush\n      .sendNotification(regId, payload, settings.web)\n      .then(() => ({\n        success: 1,\n        failure: 0,\n        message: [\n          {\n            regId,\n            error: null,\n          },\n        ],\n      }))\n      .catch((err) => ({\n        success: 0,\n        failure: 1,\n        message: [\n          {\n            regId,\n            error: err,\n            errorMsg: err.message,\n          },\n        ],\n      }))\n  );\n\n  const results = await Promise.all(promises);\n\n  const reduced = results.reduce((acc, current) => ({\n    success: acc.success + current.success,\n    failure: acc.failure + current.failure,\n    message: [...acc.message, ...current.message],\n  }));\n  return assoc('method', WEB_METHOD, reduced);\n};\n\nmodule.exports = sendWebPush;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"aa505799d25de70d1d84a3cf6792001a241e94db","contentHash":"0347595c3fe1e7989642d2812cec3afaf9e48613e81c3eb2d89ef1a20cd08679"}}